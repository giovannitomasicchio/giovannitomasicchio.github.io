<!doctype html><html class=no-js lang=it><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Parsing di feed RSS con simpleXML - Giovanni Tomasicchio</title><script>(function(a,b){a[b]=a[b].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="Leggere un feed RSS con PHP utilizzando SimpleXML"><meta property="og:title" content="Parsing di feed RSS con simpleXML"><meta property="og:description" content="Leggere un feed RSS con PHP utilizzando SimpleXML"><meta property="og:type" content="article"><meta property="og:url" content="https://giovannitomasicchio.github.io/articoli/parsing-di-feed-rss-con-simplexml/"><meta property="article:section" content="articoli"><meta property="article:published_time" content="2006-12-16T12:45:08+00:00"><meta property="article:modified_time" content="2006-12-16T12:45:08+00:00"><meta itemprop=name content="Parsing di feed RSS con simpleXML"><meta itemprop=description content="Leggere un feed RSS con PHP utilizzando SimpleXML"><meta itemprop=datePublished content="2006-12-16T12:45:08+00:00"><meta itemprop=dateModified content="2006-12-16T12:45:08+00:00"><meta itemprop=wordCount content="1673"><meta itemprop=keywords content="RSS,DOM,email,SimpleXML,XML,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Parsing di feed RSS con simpleXML"><meta name=twitter:description content="Leggere un feed RSS con PHP utilizzando SimpleXML"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,regular,italic,600,600italic,700,700italic,800,800italic|Kaushan+Script:regular"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/custom.css><link rel="shortcut icon" href=/favicon.ico><script async src="https://www.googletagmanager.com/gtag/js?id=G-525H86QENV"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-525H86QENV',{anonymize_ip:!1})}</script></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Giovanni Tomasicchio" rel=home><div class="logo__item logo__text"><div class=logo__title>Giovanni Tomasicchio</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/articoli/><span class=menu__text>Articoli PHP</span></a></li><li class=menu__item><a class=menu__link href=/corsi/><span class=menu__text>Corsi</span></a></li><li class=menu__item><a class=menu__link href=/contatti/><span class=menu__text>Contatti</span></a></li><li class=menu__item><a class=menu__link href=/ricerca/><span class=menu__text>Ricerca</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Parsing di feed RSS con simpleXML</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2006-12-16T12:45:08Z>16 December 2006</time></div></div></header><div class="content post__content clearfix"><h3 id=i-vantaggi-della-libreria-simplexml>I vantaggi della libreria simpleXML</h3><p>Prima che fosse introdotta la libreria simpleXML, apparsa con la versione 5 di PHP, l&rsquo;attività di parsing (lettura) ed utilizzo dei dati contenuti nei documenti XML era affidata esclusivamente alle librerie SAX e DOM, sicuramente potenti ma non di immediato impiego. Questo nuovo strumento, come il nome suggerisce, semplifica notevolmente la vita degli sviluppatori interessati all&rsquo;interazione tra PHP e XML.</p><p>Grazie a SimpleXML è possibile ottenere con estrema facilità una gerarchia di oggetti che rispecchiano la struttura originale del documento XML di cui si sta effettuando l&rsquo;analisi. L&rsquo;uso delle proprietà e dei metodi di tali oggetti permette poi l&rsquo;accesso ai contenuti dei tag del documento XML, garantendone un&rsquo;immediata gestione e riutilizzo per i più svariati scopi.</p><p>In questo articolo vedremo in particolare come sia possibile usare simpleXML per realizzare semplici applicazioni PHP in grado di leggere documenti RSS (i ben noti feed sono infatti dei documenti XML) per poi creare, sulla base dei dati estratti, pagine dinamiche che ne riportano i contenuti.</p><hr><h3 id=usare-simplexml>Usare simpleXML</h3><p>Iniziamo subito a vedere come effettuare il parsing di un documento XML con simpleXML. Ecco l&rsquo;unica istruzione necessaria:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php>$documento <span style=color:#f92672>=</span> <span style=color:#a6e22e>simplexml_load_file</span>(<span style=color:#e6db74>&#34;file_esempio.xml&#34;</span>);
</code></pre></div><p>Estremamente semplice non trovate? E' interessante notare che simpleXML con questa funzione non si è limitato ad una semplice lettura del file indicato ma ha già creato la gerarchia di oggetti rappresentanti la struttura del documento XML.</p><p>Vedremo fra un po' come accedere a questa struttura. Nel frattempo è interessante notare che il parametro passato alla funzione simplexml_load_file() può anche essere, e in effetti lo sarà nel nostro esempio, un indirizzo (URL) di un documento XML remoto. Questo significa che uno script, realizzato in locale o alloggiato su un sito internet, è in grado di leggere ed utilizzare documenti XML generati dal altri siti internet, come nel caso dei feed RSS.</p><p>Entriamo ora nel vivo della questione e vediamo come accedere alla gerarchia di oggetti restituita dalla funzione simplexml_load_file(). Va subito osservato come tutta la gerarchia è contenuta nella variabile restituita da tale funzione, che nel nostro caso si chiama appunto $documento. Tale variabile risulta essere un oggetto corrispondente all&rsquo;elemento radice del file XML. Dentro tale oggetto ci si può muove agilmente, grazie alla seguente sintassi:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php>$documento<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>nome_elementi_figli</span>;
</code></pre></div><p>simplexml_load_file() restituisce quindi un oggetto che rappresenta l&rsquo;elemento radice del documento XML, al cui interno verranno innestati un insieme di ulteriori oggetti, ciascuno dei quali rappresenta un nodo figlio. Il nome dei nodi figli diverrà il nome degli oggetti che li rappresentano. Se più nodi figlio posseggono lo stesso nome allora simpleXML genera un array di oggetti corrispondenti. Per chiarire le cose facciamo un esempio, riferendoci al seguente semplice documento chiamato &ldquo;esempio.xml&rdquo;:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#f92672>&lt;radice&gt;</span>
  <span style=color:#f92672>&lt;item&gt;</span>primo elemento<span style=color:#f92672>&lt;/item&gt;</span>
  <span style=color:#f92672>&lt;item&gt;</span>secondo elemento<span style=color:#f92672>&lt;/item&gt;</span>
  <span style=color:#f92672>&lt;item&gt;</span>terzo elemento<span style=color:#f92672>&lt;/item&gt;</span>
<span style=color:#f92672>&lt;/radice&gt;</span>
</code></pre></div><p>Attraverso le seguenti istruzioni possiamo recuperare l&rsquo;array contenente i tre oggetti che rappresentano i 3 elementi figli &lt;item> presenti in esempio.xml e annidati in &lt;radice>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php>$documento <span style=color:#f92672>=</span> <span style=color:#a6e22e>simplexml_load_file</span>(<span style=color:#e6db74>&#34;esempio.xml&#34;</span>);
$array_items <span style=color:#f92672>=</span> $documento<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>item</span>;
</code></pre></div><p>Infine, con un semplice ciclo foreach, possiamo stampare il contenuto dei tre oggetti &lt;item>. Ecco il codice necessario:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#66d9ef>foreach</span>($array_items <span style=color:#66d9ef>as</span> $item)
{
  <span style=color:#66d9ef>echo</span> $item <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;&lt;br /&gt;&#34;</span>;
}
</code></pre></div><p>Nel caso in cui i tag &lt;item> del nostro file &ldquo;esempio.xml&rdquo; contenessero ulteriori tag figli annidati, essi avrebbero potuto essere recuperati con una sintassi del tutto simile a quella appena vista. Complichiamo un po' il nostro file &ldquo;esempio.xml&rdquo; e vediamo come trattarlo al fine di recuperare i nuovi tag inseriti:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#f92672>&lt;radice&gt;</span>
  <span style=color:#f92672>&lt;item&gt;</span>
     <span style=color:#f92672>&lt;title&gt;</span>primo elemento<span style=color:#f92672>&lt;/title&gt;</span>
     <span style=color:#f92672>&lt;autore&gt;</span>pinco<span style=color:#f92672>&lt;/autore&gt;</span>
  <span style=color:#f92672>&lt;/item&gt;</span>
  <span style=color:#f92672>&lt;item&gt;</span>
     <span style=color:#f92672>&lt;title&gt;</span>secondo elemento<span style=color:#f92672>&lt;/title&gt;</span>
     <span style=color:#f92672>&lt;autore&gt;</span>pallino<span style=color:#f92672>&lt;/autore&gt;</span>
  <span style=color:#f92672>&lt;/item&gt;</span>
  <span style=color:#f92672>&lt;item&gt;</span>
     <span style=color:#f92672>&lt;title&gt;</span>terzo elemento<span style=color:#f92672>&lt;/title&gt;</span>
     <span style=color:#f92672>&lt;autore&gt;</span>pallone<span style=color:#f92672>&lt;/autore&gt;</span>
  <span style=color:#f92672>&lt;/item&gt;</span>
<span style=color:#f92672>&lt;/radice&gt;</span>
</code></pre></div><p>A questo punto se vogliamo recuperare il contenuto degli elementi figli dei tag &lt;item> presenti nel documento, non dobbiamo far altro che adoperare il seguente ciclo foreach:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php>$documento <span style=color:#f92672>=</span> <span style=color:#a6e22e>simplexml_load_file</span>(<span style=color:#e6db74>&#34;esempio.xml&#34;</span>);
$array_items <span style=color:#f92672>=</span> $documento<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>item</span>;
<span style=color:#66d9ef>foreach</span>($array_items <span style=color:#66d9ef>as</span> $item)
{
  <span style=color:#66d9ef>echo</span> $item<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>title</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;&lt;br /&gt;&#34;</span>;
  <span style=color:#66d9ef>echo</span> $item<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>autore</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;&lt;br /&gt;&#34;</span>;
}
</code></pre></div><p>Come potete notare abbiamo adoperato la sintassi per il recupero degli elementi già introdotta in precedenza. Va osservato che quando un tag (nel nostro caso &lt;item>) contiene elementi figli con nome distinto (nel nostro caso &lt;title> o &lt;autore>) non è necessario adoperare un ciclo foreach per accedervi. Basta infatti usare la sintassi:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#66d9ef>echo</span> $item<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>title</span>;
<span style=color:#66d9ef>echo</span> $item<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>autore</span>;
</code></pre></div><p>Verrà selezionato automaticamente l&rsquo;unico nodo figlio &ldquo;title&rdquo; e &ldquo;autore&rdquo;. I nodi figli &lt;title> e &lt;autore>, seppur presenti più volte nel documento XML, sono però unici nel nodo &ldquo;item&rdquo; di appartenenza.</p><hr><h3 id=uno-script-per-leggere-rss-20>Uno script per leggere RSS 2.0</h3><p>Di seguito trovate un&rsquo;applicazione di tutto quello che abbiamo spiegato fino ad ora. E' uno script che pubblicherà i feed RSS (versione 2.0) forniti da un sito web il cui indirizzo dovrà essere specificato nella configurazione dello script stesso, nella variabile $url_feed. Considerata l&rsquo;estrema variabilità dei tag usati in un documento RSS si è pensato di preparare uno script in grado di analizzare la fonte (feed) in questione e stampare, tra i tag contemplati nella <a href=http://rss.specifiche.it/2.0/>specifica RSS 2.0</a>, quelli effettivamente impiegati nel particolare documento RSS che si sta elaborando.</p><p>In linea di principio un documento RSS è composto da una serie di tag &lt;channel> (di solito uno), ciascuno contiene due tipologie di dati:</p><ul><li>un insieme di tag descriventi il canale (link al sito, autore, lingua, copyright, ecc.);</li><li>una sequenza di tag &lt;item> contenenti i contenuti veri e propri, insieme ad ulteriori informazioni ad essi associate (autore dell&rsquo;item, data di pubblicazione dell&rsquo;item, link alla pagina del sito in cui è pubblicato l&rsquo;item, ecc.).</li></ul><p>Si tenga presente che i tag che un &lt;channel> deve necessariamente contenere sono solo 3 e sono decisamente i più informativi: &lt;title>, &lt;link> e &lt;description>. La lista di tag &lt;item> comunemente presente in &lt;channel> invece non è obbligatoria (benché auspicata). Un tag &lt;channel> senza alcun tag &lt;item> al suo interno sarebbe un pò come una emittente radio senza nessuna trasmissione all&rsquo;attivo: non molto entusiasmante insomma!</p><p>Lo script proposto preleva tutti e tre i tag obbligatori di &lt;channel> per poi mostrarli nella pagina generata. Esso pubblicherà anche tutti gli altri tag possibili per &lt;channel>, allorché essi fosserò effettivamente presenti nel documento RSS.</p><p>Per quanto riguarda gli elementi &lt;item> non ci sono invece tag annidati obbligatori (anche se viene consigliato di specificare, come per channel, un title, un link e un description). Lo script quindi valuta di volta in volta la presenza dei tag in questione e li trasforma in elementi di pagina HTML nel caso in cui essi sono effettivamente contenuti nei tag &lt;item> presenti nel documento in analisi.</p><p>Ecco lo script e alcuni commenti per una sua più chiara comprensione:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
<span style=color:#75715e>// indirizzo remoto del feed
</span><span style=color:#75715e></span>$url_feed <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;http://www.phpnews.it/index2.php?option=com_rss&amp;feed=RSS2.0&amp;no_html=1&#34;</span>;

<span style=color:#75715e>// array contenente i tag della specifica RSS 2.0 relativi a channel - commentare gli elementi che non si desidera processare
</span><span style=color:#75715e></span>$tags_channel <span style=color:#f92672>=</span> <span style=color:#66d9ef>array</span>(<span style=color:#e6db74>&#34;title&#34;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;Titolo feed&#34;</span>,
<span style=color:#e6db74>&#34;link&#34;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;URL del sito che distribuisce il canale&#34;</span>,
<span style=color:#e6db74>&#34;description&#34;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;Descrizione del canale&#34;</span>,
<span style=color:#e6db74>&#34;language&#34;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;Lingua del canale&#34;</span>,
<span style=color:#e6db74>&#34;copyright&#34;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;Info copyright&#34;</span>,
<span style=color:#e6db74>&#34;managingEditor&#34;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;Email del responsabile editoriale&#34;</span>,
<span style=color:#e6db74>&#34;webMaster&#34;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;Email del responsabile del sito&#34;</span>,
<span style=color:#e6db74>&#34;pubDate&#34;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;Data creazione del canale&#34;</span>,
<span style=color:#e6db74>&#34;lastBuildDate&#34;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;Data ultimo aggiornamento del canale&#34;</span>,
<span style=color:#e6db74>&#34;category&#34;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;Alcuni argomenti su cui verte il canale&#34;</span>,
<span style=color:#e6db74>&#34;generator&#34;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;Software con cui viene generato il canale&#34;</span>,
<span style=color:#e6db74>&#34;docs&#34;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;URL della documentazione sul formato del feed&#34;</span>,
<span style=color:#e6db74>&#34;cloud&#34;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;Servizio web che supporti rssCloud per questo canale&#34;</span>,
<span style=color:#e6db74>&#34;ttl&#34;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;Minuti prima di eseguire un aggiornamento del canale&#34;</span>,
<span style=color:#e6db74>&#34;rating&#34;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;Il PICS per la votazione del canale&#34;</span>,
<span style=color:#e6db74>&#34;textInput&#34;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;Specifica un campo input che può essere mostrato con il canale&#34;</span>,
<span style=color:#e6db74>&#34;skipHours&#34;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;Info per gli aggregatori indicante quando inibire la lettura&#34;</span>,
<span style=color:#e6db74>&#34;skipDays&#34;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;Info per gli aggregatori indicante in che giorni inibire la lettura&#34;</span>);

<span style=color:#75715e>// array contenente i tag della specifica RSS 2.0 relativi a item - commentare gli elementi che non si desidera processare
</span><span style=color:#75715e></span>$tags_item <span style=color:#f92672>=</span> <span style=color:#66d9ef>array</span>(<span style=color:#e6db74>&#34;title&#34;</span> <span style=color:#f92672>=&gt;</span>  <span style=color:#e6db74>&#34;Titolo item&#34;</span>,
<span style=color:#e6db74>&#34;link&#34;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;URL dell&#39;item&#34;</span>,
<span style=color:#e6db74>&#34;description&#34;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;Sintesi dell&#39;item&#34;</span>,
<span style=color:#e6db74>&#34;author&#34;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;Autore&#34;</span>,
<span style=color:#e6db74>&#34;category&#34;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;Categoria dell&#39;item&#34;</span>,
<span style=color:#e6db74>&#34;comments&#34;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;URL della pagina contenente i commenti all&#39;item&#34;</span>,
<span style=color:#e6db74>&#34;enclosure&#34;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;Descrive un oggetto multimediale allegato all&#39;item&#34;</span>,
<span style=color:#e6db74>&#34;guid&#34;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;Stringa che identifica univocamente l&#39;item&#34;</span>,
<span style=color:#e6db74>&#34;pubDate&#34;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;Data di pubblicazione dell&#39;item&#34;</span>,
<span style=color:#e6db74>&#34;source&#34;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;Il canale RSS dal quale proviene l&#39;item&#34;</span>);


<span style=color:#75715e>// file RSS che si desidera elaborare
</span><span style=color:#75715e></span>$document <span style=color:#f92672>=</span> <span style=color:#a6e22e>simplexml_load_file</span>($url_feed);

<span style=color:#75715e>// stampa dei tag presenti in channel
</span><span style=color:#75715e></span><span style=color:#66d9ef>foreach</span>($document<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>channel</span> <span style=color:#66d9ef>as</span> $channel)
{
   <span style=color:#66d9ef>foreach</span>($tags_channel <span style=color:#66d9ef>as</span> $key_ch <span style=color:#f92672>=&gt;</span> $desc_ch)
   {
       <span style=color:#75715e>// verifica la presenza del tag nella descrizione del canale - se esiste lo stampa
</span><span style=color:#75715e></span>       <span style=color:#66d9ef>if</span>($channel<span style=color:#f92672>-&gt;</span>$key_ch)
       {
           <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;&lt;p&gt;&lt;b&gt;&#34;</span> <span style=color:#f92672>.</span> $desc_ch <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;:&lt;/b&gt; &#34;</span> <span style=color:#f92672>.</span> <span style=color:#a6e22e>htmlentities</span>(<span style=color:#a6e22e>utf8_decode</span>($channel<span style=color:#f92672>-&gt;</span>$key_ch)) <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;&lt;/p&gt;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>;
       }
   }

   <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;&lt;hr /&gt;&#34;</span>;
   <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;&lt;hr /&gt;&#34;</span>;

   <span style=color:#75715e>// stampa degli item e dei tag in essi annidati
</span><span style=color:#75715e></span>   <span style=color:#66d9ef>foreach</span>($channel<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>item</span> <span style=color:#66d9ef>as</span> $item)
   {
       <span style=color:#66d9ef>foreach</span>($tags_item <span style=color:#66d9ef>as</span> $key_it <span style=color:#f92672>=&gt;</span> $desc_it)
       {
           <span style=color:#66d9ef>if</span>($item<span style=color:#f92672>-&gt;</span>$key_it)
           {
               <span style=color:#75715e>// verifica la presenza del tag nell&#39;item - se esiste lo stampa
</span><span style=color:#75715e></span>               <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;&lt;p&gt;&lt;b&gt;&#34;</span> <span style=color:#f92672>.</span> $desc_it <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;:&lt;/b&gt; &#34;</span> <span style=color:#f92672>.</span> <span style=color:#a6e22e>htmlentities</span>(<span style=color:#a6e22e>utf8_decode</span>($item<span style=color:#f92672>-&gt;</span>$key_it)) <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;&lt;/p&gt;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>;
           }
       }

       <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;&lt;hr /&gt;&#34;</span>;
   }
}
<span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>Per configurare lo script basta specificare in $url_feed l&rsquo;URL remoto dell&rsquo;RSS a cui si intende accedere. Lo script crea poi 2 array ($tags_channel e $tags_item) contenenti i nomi dei tag previsti della specifica RSS 2.0, associando a ciascuno una breve descrizione del loro significato logico da adoperare nella fase di conversione in HTML del feed. Il primo array descrive i possibili tag annidati in &lt;channel> mentre il secondo quelli annidati in &lt;item>.</p><p>Caricato il documento RSS con la funzione simplexml_load_file, lo script passa poi a verificare la presenza nel documento dei diversi tag e, nel caso in cui essi siano effettivamente presenti, li stampa avendo cura di fare alcune codifiche sui caratteri (utf8_decode()) ed convertendo i tag HTML (htmlentities()).</p><p>Se si ritiene che le informazioni presenti in un particolare feed siano troppo dettagliate, basta commentare le parti superflue dei due array associativi. Questo permetterà di ignorare i tag RSS che non volete siano riconosciuti e stampati dallo script.</p><p>Le tecniche di lettura e trasformazione dei documenti XML viste sopra rimangono valide a patto che i documenti su cui viene eseguito il parsing siano completamente aderenti al protocollo XML (o RSS nel caso dello script presentato). Documenti che non sono ben formati o che usano nomi anomali per i tag componenti i documenti possono generare errori nello script e/o risultati inattesi. Conviene quindi verificare preventivamente la validità dei feed a cui si è interessati, adoperando magari uno dei molti servizi presenti in rete. <a href=http://validator.w3.org/feed/>Eccone uno</a>.</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/rss/ rel=tag>RSS</a></li><li class=tags__item><a class="tags__link btn" href=/tags/dom/ rel=tag>DOM</a></li><li class=tags__item><a class="tags__link btn" href=/tags/email/ rel=tag>email</a></li><li class=tags__item><a class="tags__link btn" href=/tags/simplexml/ rel=tag>SimpleXML</a></li><li class=tags__item><a class="tags__link btn" href=/tags/xml/ rel=tag>XML</a></li></ul></div></footer></article></main><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=/articoli/installare-apache-22-php-52-e-mysql-5-su-windows/ rel=prev><span class=pager__subtitle>«&#8201;Precedente</span><p class=pager__title>Installare Apache 2.2, PHP 5.2 e MySQL 5 su Windows</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=/articoli/login-con-ajax-e-php/ rel=next><span class=pager__subtitle>Prossimo&#8201;»</span><p class=pager__title>Login con AJAX e PHP</p></a></div></nav><section class=comments><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//giovannitomasicchio-it.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2021 Giovanni Tomasicchio.
<span class=footer__copyright-credits>Generato con <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> e il tema <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a>.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>