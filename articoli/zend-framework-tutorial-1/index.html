<!doctype html><html class=no-js lang=it><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Zend Framework Tutorial - 1 - Giovanni Tomasicchio</title><script>(function(a,b){a[b]=a[b].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="Introduzione allo Zend Framework"><meta property="og:title" content="Zend Framework Tutorial - 1"><meta property="og:description" content="Introduzione allo Zend Framework"><meta property="og:type" content="article"><meta property="og:url" content="https://giovannitomasicchio.github.io/articoli/zend-framework-tutorial-1/"><meta property="article:section" content="articoli"><meta property="article:published_time" content="2007-07-01T22:39:41+00:00"><meta property="article:modified_time" content="2007-07-01T22:39:41+00:00"><meta itemprop=name content="Zend Framework Tutorial - 1"><meta itemprop=description content="Introduzione allo Zend Framework"><meta itemprop=datePublished content="2007-07-01T22:39:41+00:00"><meta itemprop=dateModified content="2007-07-01T22:39:41+00:00"><meta itemprop=wordCount content="1737"><meta itemprop=keywords content="database,Zend Framework,MySQL,mod_rewrite,PDO,SQL,upload,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Zend Framework Tutorial - 1"><meta name=twitter:description content="Introduzione allo Zend Framework"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,regular,italic,600,600italic,700,700italic,800,800italic|Kaushan+Script:regular"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/custom.css><link rel="shortcut icon" href=/favicon.ico><script async src="https://www.googletagmanager.com/gtag/js?id=G-525H86QENV"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-525H86QENV',{anonymize_ip:!1})}</script></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Giovanni Tomasicchio" rel=home><div class="logo__item logo__text"><div class=logo__title>Giovanni Tomasicchio</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/articoli/><span class=menu__text>Articoli PHP</span></a></li><li class=menu__item><a class=menu__link href=/corsi/><span class=menu__text>Corsi</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Zend Framework Tutorial - 1</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2007-07-01T22:39:41Z>1 July 2007</time></div></div></header><div class="content post__content clearfix"><h3 id=introduzione>Introduzione</h3><p>Lo <a href=http://framework.zend.com>Zend Framework</a> è una completa collezione di classi da impiegare nella realizzazione di applicazioni PHP di media e grande complessità. Ci sono classi per tutte le esigenze quindi è inutile provare a farne un elenco dettagliato e descriverne il funzionamento. Il modo migliore per scoprire lo Zend Framework è invece realizzare con esso una piccola applicazione e quindi in questo tutorial vedremo come costruire un sito web in grado di mostrare delle news, gestite dinamicamente dall&rsquo;utente, e conservate in un database MySQL. In home page mostreremo l&rsquo;elenco delle news e attraverso dei link sarà possibile leggerne il testo completo, inserirne di nuove, modificale e cancellarle.</p><p>Questo piccolo progetto ovviamente è solo un pretesto per iniziare ad usare lo Zend Framework e ci limiteremo ad impiegare solo alcune delle sue numerose funzionalità, quelle che ci permetteranno di realizzare velocemente l&rsquo;applicazione e che probabilmente risulteranno più semplici per un novizio.</p><p>Servirà avere Apache, PHP 5 e MySQL correttamente installati. PHP dovrà avere le estensioni PDO e PDO_MYSQL caricate, e ovviamente avremo precedentemente scaricato lo Zend Framework e scompattato l&rsquo;archivio compresso in una cartella sul nostro PC. Infine il mod_rewrite ed i file .htaccess di Apache dovranno essere abilitati.</p><p>Per i più curiosi e per chi non vuole attendere troppo, da <a href=http://www.phpnews.it/download/ZF-tutorial.zip>questo link</a> potete scaricare il codice completo che compone il progetto, compreso il file SQL per creare il database. Se volete già provarlo vi anticipo che sarà necessario effettuare qualche modifica al file index.php affiché i dati in esso presenti siano corretti per il vostro PC (dati di accesso al DB, percorso della cartella dello Zend Framework). Avremo modo di affrontare con molta più calma tali configurazioni nel seguito del tutorial.</p><p>In questo primo articolo studieremo l&rsquo;architettura dell&rsquo;applicazione, vedremo cioè quali file compongono il progetto e quali sono le responsabilità loro affidate.</p><hr><h3 id=la-gestione-delle-pagine-con-lapproccio-mvc>La gestione delle pagine con l&rsquo;approccio MVC</h3><p>Il cuore di una applicazione web è la strategia adottata per generare le pagine dinamiche, ovvero il meccanismo che decide quali contenuti mostrare in base all&rsquo;URL richiesto dall&rsquo;utente. Usare lo Zend Framework non significa adottare necessariamente il suo sistema di gestione delle pagine web, anche se non farlo sarebbe veramente un peccato. In questo tutorial seguiremo quindi l&rsquo;approccio proposto dal framework che si basa sul modello MVC, meccanismo alla base di molti framework, anche di altri linguaggi di programmazione.</p><p>Lo scopo dell&rsquo;architettura MVC è quello di rendere più semplice la realizzazione e la manutenzione del codice, attraverso una separazione netta delle diverse competenze in componenti distinti. Il modello MVC considera i <strong>dati</strong>, l'<strong>interfaccia</strong> e la <strong>logica di funzionamento</strong> i 3 aspetti fondamentali di qualsiasi elemento che interagisce con l&rsquo;utente. Questi 3 aspetti sono affidati ad altrettanti componenti che prendono rispettivamente il nome di <strong>Model</strong>, <strong>View</strong> e <strong>Controller</strong>. Questi tre componenti interagiscono tra loro e, ciascuno secondo le proprie responsabilità, realizzano tutte le funzionalità di un elemento dell&rsquo;applicazione. Ad esempio, una pagina di registrazione di un utente potrebbe essere realizzata con un Model che si occupa di memorizzare i dati dell&rsquo;utente nel database, di una View che realizza il form di inserimento dei dati e mostra un messaggio di avvenuta iscrizione e di un Controller che coordina le diverse fasi della registrazione e determina l&rsquo;ordine delle operazioni.</p><p>Il modello MVC è molto diffuso nella realizzazione del software ma la sua implementazione cambia nei diversi contesti. Quindi, invece di annoiarci con una trattazione teorica, passiamo subito ad analizzare la sua realizzazione nello Zend Framework.</p><hr><h3 id=lmvc-di-zend-framework>L&rsquo;MVC di Zend Framework</h3><p>Vogliamo realizzare un sito nel quale l&rsquo;utente può vedere l&rsquo;elenco delle news registrate, inserirne di nuove, modificare e leggere il testo completo di una notizia.</p><p>Lo Zend Framework ci suggerisce di raggruppare tali funzionalità in modo da avere degli insiemi di &ldquo;azioni&rdquo; correlate. Nel nostro caso avremo l&rsquo;insieme delle azioni che è possibile effettuare sulle notizie (visualizzazione, inserimento, modifica e cancellazione). In situazioni più complesse avremo sicuramente molti insiemi di funzionalità (gestione utente, gestione download/upload file, gestione archivio news, gestione commenti, ecc.).</p><p>Per ciascun insieme di azioni dobbiamo creare una classe che deve implementare la logica di funzionamento delle singole funzionalità, ma non si deve occupare dell&rsquo;interfaccia grafica (non deve contenere HTML) e non deve effettuare direttamente l&rsquo;accesso ai dati necessari alla realizzazioni delle funzionalità (niente query quindi). Questa tipologia di classe costituisce il <strong>Controller</strong> citato nella pagina precedente e deve contenere un metodo (una funzione) per ciascuna azione di cui è responsabile. Nel nostro caso la classe che funge da Controller nelle notizie avrà 4 metodi: uno per la lettura di una singola notizia, uno per l&rsquo;inserimento, uno per la modifica ed uno per la cancellazione di una notizia.</p><p>Riepilogando, le singole funzionalità (dette &ldquo;<strong>Action</strong>") del nostro sito web devono essere raggruppate in insiemi correlati e per ciascun insieme deve essere realizzata una classe (il Controller) che possiede un metodo per ogni Action da implementare.</p><p>Accanto ai Controller necessari al funzionamento della nostra applicazione, individuati dall&rsquo;analisi che abbiamo appena fatto, due ulteriori Controller devono essere sempre realizzati per gestire delle operazioni speciali. Un Controller di nome <strong>IndexController</strong> si deve occupare di realizzare la home page del sito attraverso un metodo di nome <strong>indexAction</strong> , infatti la home page è una funzionalità presente in tutti i siti. Nel nostro caso questo Controller mostrerà l&rsquo;elenco delle news presenti nel database (ecco perché non abbiamo considerato tale funzionalità nel controler delle news!). Un secondo Controller di nome <strong>ErrorController</strong> invece deve gestisce le pagine di errore attraverso un metodo di nome <strong>errorAction</strong>, automaticamente interpellato dal framework ad esempio quando l&rsquo;utente tenta di accedere ad una pagina inesistente, ovvero ad una &ldquo;Action&rdquo; non implementata dal nostro sito. Vedremo i dettagli di questi 2 Controller quando mostreremo il codice del progetto.</p><p>L&rsquo;IndexController può implementare anche altre Action per cui si potrebbe realizzare un sito web anche solo con questo Controller e con l&rsquo;ErrorController. A dire il vero anche l&rsquo;ErrorController potrebbe non essere realizzato, ma così facendo in caso di errore otterremo delle sgradevoli segnalazioni, simili ai fatal error di PHP.</p><p>L&rsquo;HTML necessario a ciascuna Action non deve trovarsi nel Controller ma in file separati, detti <strong>template</strong>. Tali file possono contenere codice PHP ma è buona norma che questo serva solo alla visualizzazione dei contenuti dinamici. Ciascuno di questi file è in generale associato ad una particolare Action e in questi casi lo Zend Framework, grazie ad alcune convenzioni sui nomi che vedremo in seguito, è in grado di individuarlo ed utilizzarlo automaticamente in base alla funzionalità richiesta dall&rsquo;utente. L&rsquo;esecuzione di questi file avviene all&rsquo;interno della classe che realizza la <strong>View</strong> e che, al contrario dei Controller, non dobbiamo creare noi perché già presente nel framework. Analizzando il codice vedremo come la View offre molte funzionalità che ci semplificheranno il compito di realizzare i template HTML.</p><p>Infine l&rsquo;accesso ai dati, come premesso, non deve essere eseguito ne dal Controller ne dalla View, ma deve essere effettuato da classi specializzate dette <strong>Model</strong>. In questo tutorial per realizzare i Model useremo un approccio molto simile a quello di una comune applicazione web PHP/MySQL, ovvero attraverso delle query dirette sul database, ma è importante sapere che lo Zend Framework offre potenti alternative che però aggiungerebbero complessità a questo tutorial. Realizzeremo quindi una classe con diversi metodi necessari ad effettuare le operazioni sul database: lettura, inserimento ed aggiornamento delle news. Lo Zend Framework in questo caso non dà indicazione su come organizzare la classe.</p><hr><h3 id=il-front-controller>Il Front Controller</h3><p>Abbiamo visto come le differenti funzionalità presenti nel sito devono essere realizzare da uno o più Controller i quali si affidano a una o più View per la parte grafica e ad uno o più Model per l&rsquo;accesso ai dati. Rimane da capire come questo meccanismo si leghi alla navigazione di un utente. In fondo un utente che visita un sito web si limita a richiedere una sequenza di pagine, ovvero di URL nei quali spesso è evidente il nome dello script richiesto ed eventuali parametri passati con la query string (<a href=http://www.miosito.it/mostra>http://www.miosito.it/mostra</a>_news.php?id=123).</p><p>L&rsquo;approccio MVC dello Zend Framework stravolge la naturale associazione tra URL e script PHP richiamato, in modo da utilizzare l&rsquo;intero URL per capire quale Controller invocare e quale sua Action eseguire. Questo risultato è ottenuto facendo convogliare tutte le richieste dell&rsquo;utente, ovvero tutti gli URL, ad un unico script PHP che funge da smistatore delle pagine. In pratica, indipendentemente dall&rsquo;URL digitato dall&rsquo;utente, viene sempre eseguito uno stesso file, nel nostro caso index.php, detto <strong>file di bootstrap</strong>. All&rsquo;interno di index.php creiamo un oggetto smistatore che prende il nome di <strong>Front Controller</strong> il quale, attraverso l&rsquo;URL richiesto, deduce quale Controller richiamare e quale Action eseguire.</p><p>Qual&rsquo;è il criterio seguito dal Front Controller per estrarre dall&rsquo;URL il nome del Controller e della Action (ovvero il nome della classe e del suo metodo responsabile di una certa funzionalità)? Supponendo che l&rsquo;URL di base della nostra applicazione sia <a href=http://www.miosito.it/cartella>http://www.miosito.it/cartella</a>_applicazione/ allora gli URL:</p><p><a href=http://www.miosito.it/cartella>http://www.miosito.it/cartella</a>_applicazione/notizie/new/</p><p><a href=http://www.miosito.it/cartella>http://www.miosito.it/cartella</a>_applicazione/notizie/edit/id/123/</p><p><a href=http://www.miosito.it/cartella>http://www.miosito.it/cartella</a>_applicazione/notizie/delete/id/123/</p><p><a href=http://www.miosito.it/cartella>http://www.miosito.it/cartella</a>_applicazione/notizie/view/id/123/</p><p>fanno tutti riferimento al Controller (ovvero alla classe) <strong>Notizie</strong>Controller, e alle sue Action (ovvero i suoi metodi) di nome <strong>new</strong>Action, <strong>edit</strong>Action, <strong>delete</strong>Action, <strong>view</strong>Action. Inoltre gli ultimi 3 URL contengono anche un parametro &ldquo;id&rdquo; di valore 123.</p><p>Quindi la struttura della classe NotizieController sarà la seguente (si noti come questo tipo di classi deve ereditare da <strong>Zend_Controller_Action</strong>, padre di tutti i Controller della nostra applicazione):</p><pre><code>&lt;pre class=&quot;brush: php&quot;&gt;
&lt;?php
class NewsController extends Zend_Controller_Action
{
   public function newAction() {
   }

   public function editAction() {
   }

   public function deleteAction() {
   }

   public function viewAction() {
   }
}
?&gt;
</code></pre><p>In generale gli URL quindi contengono:</p><ol><li><p>il nome del Controller</p></li><li><p>il nome della Action</p></li><li><p>eventuali parametri nella forma /nome1/valore1/nome2/valore2/&mldr;</p></li></ol><p>Cosa succede se manca l&rsquo;indicazione della Action, come ad esempio nell&rsquo;URL <a href=http://www.miosito.it/cartella>http://www.miosito.it/cartella</a>_applicazione/news ? Viene richiamata la Action di defult del Controller NotizieController, di nome &ldquo;indexAction&rdquo;, se esiste, altrimenti la richiesta viene inoltrata all&rsquo;ErrorController. E se addirittura manca anche il nome del Controller, come nel caso del semplice URL <a href=http://www.miosito.it/cartella>http://www.miosito.it/cartella</a>_applicazione/ ? Si tratta evidentemente della home page del sito quindi, come anticipato, viene richiamato l&rsquo;IndexController e la sua action IndexAction. Da notare che si può accedere alla home page da diversi URL:</p><p><a href=http://www.miosito.it/cartella>http://www.miosito.it/cartella</a>_applicazione/</p><p><a href=http://www.miosito.it/cartella>http://www.miosito.it/cartella</a>_applicazione/index</p><p><a href=http://www.miosito.it/cartella>http://www.miosito.it/cartella</a>_applicazione/index/index</p><p>infatti tutti quanti puntano alla indexAction dell&rsquo;IndexController. L&rsquo;ErrorController e la sua Action errorAction vengono richiamate automaticamente ogni qualvolta il front Controller non riesce ad individuare il Controller e la Action specificate dall&rsquo;utente.</p><p>Prima di concludere questa breve spiegazione tengo a precisare che il comportamento descritto è quello di default dello Zend Framework. Tutti gli aspetti analizzati e le logiche presentate sono però totalmente personalizzabili ma questo va ben oltre gli scopi del presente tutorial.</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/database/ rel=tag>database</a></li><li class=tags__item><a class="tags__link btn" href=/tags/zend-framework/ rel=tag>Zend Framework</a></li><li class=tags__item><a class="tags__link btn" href=/tags/mysql/ rel=tag>MySQL</a></li><li class=tags__item><a class="tags__link btn" href=/tags/mod_rewrite/ rel=tag>mod_rewrite</a></li><li class=tags__item><a class="tags__link btn" href=/tags/pdo/ rel=tag>PDO</a></li><li class=tags__item><a class="tags__link btn" href=/tags/sql/ rel=tag>SQL</a></li><li class=tags__item><a class="tags__link btn" href=/tags/upload/ rel=tag>upload</a></li></ul></div></footer></article></main><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=/articoli/presentazione-dello-zend-framework/ rel=prev><span class=pager__subtitle>«&#8201;Precedente</span><p class=pager__title>Presentazione dello Zend Framework</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=/articoli/zend-framework-tutorial-2/ rel=next><span class=pager__subtitle>Prossimo&#8201;»</span><p class=pager__title>Zend Framework Tutorial - 2</p></a></div></nav></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2021 Giovanni Tomasicchio.
<span class=footer__copyright-credits>Generato con <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> e il tema <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a>.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>