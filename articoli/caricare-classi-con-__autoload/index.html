<!doctype html><html class=no-js lang=it><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Caricare classi con __autoload() - Giovanni Tomasicchio</title><script>(function(a,b){a[b]=a[b].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="Caricare automaticamente le classi in PHP con __autoload"><meta property="og:title" content="Caricare classi con __autoload()"><meta property="og:description" content="Caricare automaticamente le classi in PHP con __autoload"><meta property="og:type" content="article"><meta property="og:url" content="https://giovannitomasicchio.github.io/articoli/caricare-classi-con-__autoload/"><meta property="article:section" content="articoli"><meta property="article:published_time" content="2005-03-06T00:19:09+00:00"><meta property="article:modified_time" content="2005-03-06T00:19:09+00:00"><meta itemprop=name content="Caricare classi con __autoload()"><meta itemprop=description content="Caricare automaticamente le classi in PHP con __autoload"><meta itemprop=datePublished content="2005-03-06T00:19:09+00:00"><meta itemprop=dateModified content="2005-03-06T00:19:09+00:00"><meta itemprop=wordCount content="300"><meta itemprop=keywords content="exception,XML,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Caricare classi con __autoload()"><meta name=twitter:description content="Caricare automaticamente le classi in PHP con __autoload"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,regular,italic,600,600italic,700,700italic,800,800italic|Kaushan+Script:regular"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/custom.css><link rel="shortcut icon" href=/favicon.ico><script async src="https://www.googletagmanager.com/gtag/js?id=G-525H86QENV"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-525H86QENV',{anonymize_ip:!1})}</script></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Giovanni Tomasicchio" rel=home><div class="logo__item logo__text"><div class=logo__title>Giovanni Tomasicchio</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/articoli/><span class=menu__text>Articoli PHP</span></a></li><li class=menu__item><a class=menu__link href=/corsi/><span class=menu__text>Corsi</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Caricare classi con __autoload()</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2005-03-06T00:19:09Z>6 March 2005</time></div></div></header><div class="content post__content clearfix"><p>Quando un progetto PHP orientato agli oggetti inizia a crescere e le righe di codice aumentano a dismisura lo sviluppatore inizia a mettere le definizioni di ciascuna classe in files distinti, salvati magari in una cartella apposita. Questa è certamente una buona norma ma porta ad un proliferare di istruzioni di inclusione che spesso vengono poste all&rsquo;inizio delle pagine. Alcune di queste inclusioni possono risultare inutili se caricano classi che verranno istanziate sono in particolari situazioni.</p><p>PHP 5 offre una soluzione estremamente elegante ed efficace al problema su detto attraverso la funzione <strong><a href=http://www.php.net/manual/en/language.oop5.autoload.php>__autoload()</a></strong>. In pratica si tratta semplicemente di definire una funzione con il nome __autoload che verrà chiamata ogni volta che si cerca di istanziare un oggetto da una classe non ancora definita.</p><p>Se ad esempio nel nostro script è presente l&rsquo;istruzione $oggetto = new mia_classe(); ma la classe mia_classe non è stata ancora definita, allora il PHP chiama (se presente) la funzione __autoload() passandogli come parametro il nome della classe mia_classe. Se questa funzione riesce a caricare la classe in questione allora lo script procede regolarmente, altrimenti viene lanciata una eccezione che però non può essere raccolta da un blocco catch data la gravità dell&rsquo;errore.</p><p>Vediamo un esempio:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>__autoload</span>($class_name)
{
  <span style=color:#66d9ef>require</span> $class_name <span style=color:#f92672>.</span> <span style=color:#e6db74>&#39;.php&#39;</span>;
}
</code></pre></div><p>Con la funzione riportata qui sopra, ogni volta che si cercherà di istanziare una classe non ancora definita verrà caricato (se esiste) il file che porta proprio il nome della classe e che dovrà contenerne la definizione.</p><p>Si può pensare di estendere questa funzione permettendole di caricare i files da cartelle diverse a seconda del nome della classe da istanziare. Ad esempio la seguente funzione cercherà la definizione di una ipotetica classe &ldquo;common_xml_parser&rdquo; nel file parser.php della cartella common/xml/</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>__autoload</span>($class_name)
{
 $file_name <span style=color:#f92672>=</span> <span style=color:#a6e22e>strreplace</span>(<span style=color:#e6db74>&#39;_&#39;</span>, <span style=color:#e6db74>&#39;/&#39;</span>, $class_name) <span style=color:#f92672>.</span> <span style=color:#e6db74>&#39;.php&#39;</span>;
 <span style=color:#66d9ef>require</span> $file_name;
}
</code></pre></div></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/exception/ rel=tag>exception</a></li><li class=tags__item><a class="tags__link btn" href=/tags/xml/ rel=tag>XML</a></li></ul></div></footer></article></main><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=/articoli/salvare-gli-oggetti-nella-sessione/ rel=prev><span class=pager__subtitle>«&#8201;Precedente</span><p class=pager__title>Salvare gli oggetti nella sessione</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=/articoli/lestensione-mysqli-i/ rel=next><span class=pager__subtitle>Prossimo&#8201;»</span><p class=pager__title>L'estensione mysqli - I</p></a></div></nav></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2021 Giovanni Tomasicchio.
<span class=footer__copyright-credits>Generato con <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> e il tema <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a>.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>