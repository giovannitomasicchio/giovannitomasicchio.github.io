<!doctype html><html class=no-js lang=it><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Cloaking con PHP - Giovanni Tomasicchio</title><script>(function(a,b){a[b]=a[b].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="Creare uno script PHP che effettua il cloaking"><meta property="og:title" content="Cloaking con PHP"><meta property="og:description" content="Creare uno script PHP che effettua il cloaking"><meta property="og:type" content="article"><meta property="og:url" content="https://giovannitomasicchio.github.io/articoli/cloaking-con-php/"><meta property="article:section" content="articoli"><meta property="article:published_time" content="2007-01-13T22:08:35+00:00"><meta property="article:modified_time" content="2007-01-13T22:08:35+00:00"><meta itemprop=name content="Cloaking con PHP"><meta itemprop=description content="Creare uno script PHP che effettua il cloaking"><meta itemprop=datePublished content="2007-01-13T22:08:35+00:00"><meta itemprop=dateModified content="2007-01-13T22:08:35+00:00"><meta itemprop=wordCount content="506"><meta itemprop=keywords content="SEO,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Cloaking con PHP"><meta name=twitter:description content="Creare uno script PHP che effettua il cloaking"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,regular,italic,600,600italic,700,700italic,800,800italic|Kaushan+Script:regular"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/custom.css><link rel="shortcut icon" href=/favicon.ico><script async src="https://www.googletagmanager.com/gtag/js?id=G-525H86QENV"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-525H86QENV',{anonymize_ip:!1})}</script></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Giovanni Tomasicchio" rel=home><div class="logo__item logo__text"><div class=logo__title>Giovanni Tomasicchio</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/articoli/><span class=menu__text>Articoli PHP</span></a></li><li class=menu__item><a class=menu__link href=/corsi/><span class=menu__text>Corsi</span></a></li><li class=menu__item><a class=menu__link href=/contatti/><span class=menu__text>Contatti</span></a></li><li class=menu__item><a class=menu__link href=/ricerca/><span class=menu__text>Ricerca</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Cloaking con PHP</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2007-01-13T22:08:35Z>13 January 2007</time></div></div></header><div class="content post__content clearfix"><p>Il <strong>cloaking</strong> è una pratica messa in atto da molti SEO (search engine optimizers) per migliorare la posizione di un certo sito nelle SERP (i risultati) di un motore di ricerca, in riferimento a certe keywords. La parola &ldquo;cloaking&rdquo; significa mascheramento e ben descrive quello che il processo in analisi mira a compiere.</p><p>In pratica uno script server side (scritto in PHP o altro linguaggio) si occupa di svolgere le seguenti azioni:</p><ul><li>rilevare la natura dell&rsquo;user agent (un identificativo del software) che richiede la pagina;</li><li>restituire dei risultati &ldquo;personalizzati&rdquo; a seconda dell&rsquo;esito della rilevazione svolta al punto precedente.</li></ul><p>Ora ci si può chiedere perchè un webmaster dovrebbe praticare questa &ldquo;personalizzazione&rdquo; dei contenuti veicolati dal proprio sito. Chi ha esperienza come SEO sa bene che i contenuti allettanti per gli utenti in carne ed ossa sono ben diversi dai contenuti che un motore di ricerca vorrebbe trovare per etichettare un sito come &ldquo;interessante&rdquo;, in riferimento ad una certa keyword. Ne consegue che la personalizzazione dei contenuti risulta in molti casi un&rsquo;arma vincente per ottenere risultati eccellenti, benché non completamente lecita.</p><p>Va infatti ricordato come la pratica qui esposta sia contro le policy dei motori di ricerca, i quali pretenderebbero, legittimamente o meno, che i propri spider avessero accesso agli stessi contenuti destinati agli utenti reali. Il cloaking potrebbe portare infatti ad una disarmonia tra la qualità degli argomenti &ldquo;percepita&rdquo; dal motore di ricerca e l&rsquo;effettivo valore attribuito alla risorsa dagli utenti dello stesso motore.</p><p>Al di la delle considerazioni etiche sull&rsquo;attività di SEO e al di la di quali siano le caratteristiche dei contenuti che garantiscono un buon ranking nelle SERP dei motori, di seguito viene mostrato un semplice script PHP per praticare il cloaking.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
$pagina_ottimizzata_per_gg <span style=color:#f92672>=</span> <span style=color:#e6db74>&lt;&lt;&lt;</span><span style=color:#e6db74>EOF</span><span style=color:#e6db74>
</span><span style=color:#e6db74>codice html pagina sovraottimizzata
</span><span style=color:#e6db74></span><span style=color:#e6db74>EOF</span>;

$pagina_per_utenti <span style=color:#f92672>=</span> <span style=color:#e6db74>&lt;&lt;&lt;</span><span style=color:#e6db74>EOF</span><span style=color:#e6db74>
</span><span style=color:#e6db74>codice html pagina per utenti reali
</span><span style=color:#e6db74></span><span style=color:#e6db74>EOF</span>;

$us_agent <span style=color:#f92672>=</span> $_SERVER[<span style=color:#e6db74>&#39;HTTP_USER_AGENT&#39;</span>];

$gg_agent_string <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Googlebot&#34;</span>;

<span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>strstr</span>($us_agent, $gg_agent_string)) {
  <span style=color:#66d9ef>echo</span> $pagina_ottimizzata_per_gg;
}
<span style=color:#66d9ef>else</span> {
  <span style=color:#66d9ef>echo</span> $pagina_per_utenti;
}
<span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>Come vedete la variabile $pagina_ottimizzata_per_gg conterrà il codice html dei contenuti che si vogliono restituire allo spider (in questo caso Googlebot - lo spider di Google). La variabile $pagina_per_utenti conterrà invece i contenuti reali destinati agli utenti. La variabile $us_agent raccoglie infine il valore della variabile del server relativa all&rsquo;user agent richiedente la pagina. <a href=http://www.pgts.com.au/pgtsj/pgtsj0208d.html>Ecco qui</a> una lista delle stringhe presenti nell&rsquo;header della richiesta HTTP mandate dai vari spider presenti sull&rsquo;attuale panorama dei motori di ricerca. Come vedete Googlebot manda la stringa:</p><p>Googlebot/2.1 (+http://www.googlebot.com/bot.html)</p><p>Di conseguenza con l&rsquo;istruzione:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#a6e22e>strstr</span>($us_agent, $gg_agent_string)
</code></pre></div><p>riusciamo a controllare se nella stringa relativa allo user agent è presente la parola Google. Se il controllo ha esito positivo questo significa necessariamente che ci troviamo di fronte allo spider di Google. Come vedete lo script restituisce in questo caso la variabile $pagina_ottimizzata_per_gg. In tutti gli altri casi lo script restituisce come risultato il codice html con i contenuti dedicati agli utenti. Appare chiaro che il processo di verifica dello user agent potrebbe essere esteso in modo da verificare se altri spider richiedono la pagine, in modo da inviare contenuti specifici per il particolare motore di ricerca.</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/seo/ rel=tag>SEO</a></li></ul></div></footer></article></main><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=/articoli/login-con-ajax-e-php/ rel=prev><span class=pager__subtitle>«&#8201;Precedente</span><p class=pager__title>Login con AJAX e PHP</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=/articoli/presentazione-dello-zend-framework/ rel=next><span class=pager__subtitle>Prossimo&#8201;»</span><p class=pager__title>Presentazione dello Zend Framework</p></a></div></nav><section class=comments><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//giovannitomasicchio-it.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2021 Giovanni Tomasicchio.
<span class=footer__copyright-credits>Generato con <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> e il tema <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a>.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>