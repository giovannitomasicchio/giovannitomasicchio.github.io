<!doctype html><html class=no-js lang=it><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Individuare sistema operativo e browser dell'utente - Giovanni Tomasicchio</title><script>(function(a,b){a[b]=a[b].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="Script PHP per individuare sistema operativo e browser dell'utente"><meta property="og:title" content="Individuare sistema operativo e browser dell'utente"><meta property="og:description" content="Script PHP per individuare sistema operativo e browser dell'utente"><meta property="og:type" content="article"><meta property="og:url" content="https://www.giovannitomasicchio.it/articoli/individuare-sistema-operativo-e-browser-dellutente/"><meta property="article:section" content="articoli"><meta property="article:published_time" content="2005-12-09T10:37:20+00:00"><meta property="article:modified_time" content="2005-12-09T10:37:20+00:00"><meta itemprop=name content="Individuare sistema operativo e browser dell'utente"><meta itemprop=description content="Script PHP per individuare sistema operativo e browser dell'utente"><meta itemprop=datePublished content="2005-12-09T10:37:20+00:00"><meta itemprop=dateModified content="2005-12-09T10:37:20+00:00"><meta itemprop=wordCount content="692"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Individuare sistema operativo e browser dell'utente"><meta name=twitter:description content="Script PHP per individuare sistema operativo e browser dell'utente"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,regular,italic,600,600italic,700,700italic,800,800italic|Kaushan+Script:regular"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/custom.css><link rel="shortcut icon" href=/favicon.ico><script async src="https://www.googletagmanager.com/gtag/js?id=G-525H86QENV"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-525H86QENV',{anonymize_ip:!1})}</script></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Giovanni Tomasicchio" rel=home><div class="logo__item logo__text"><div class=logo__title>Giovanni Tomasicchio</div><div class=logo__tagline>not just code monkeys</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/articoli/><span class=menu__text>Articoli PHP</span></a></li><li class=menu__item><a class=menu__link href=/corsi/><span class=menu__text>Corsi</span></a></li><li class=menu__item><a class=menu__link href=/ricerca/><span class=menu__text>Ricerca</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Individuare sistema operativo e browser dell'utente</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2005-12-09T10:37:20Z>9 December 2005</time></div></div></header><div class="content post__content clearfix"><p>Ogni qualvolta un utente visita una pagina del vostro sito, egli invia una richiesta in formato HTTP al server sul quale risiedono le vostre pagine. In questa stringa, oltre a trovarsi il nome della pagina richiesta dall&rsquo;utente, ci sono molte informazioni sul suo computer, come il sistema operativo ed il browser utilizzato.</p><p>Ecco un esempio di richiesta HTTP:</p><p>GET /sito/index.php HTTP/1.1" 200 4615 &ldquo;http://localhost/sito/index.php&rdquo; &ldquo;Mozilla/5.0 (Windows; U; Windows NT 5.1; it-IT; rv:1.7.8) Gecko/20050511 Firefox/1.0.4&rdquo;</p><p>Tra le varie informazioni contenute, quella che ci interessa è:</p><p>Mozilla/5.0 (Windows; U; Windows NT 5.1; it-IT; rv:1.7.8) Gecko/20050511 Firefox/1.0.4</p><p>Qui sono contenute informazioni sull&rsquo;OS ed il browser dell&rsquo;utente. Da una prima lettura balza subito all&rsquo;occhio Firefox/1.0.4, che ci indica che il browser dell&rsquo;utente è Firefox. Inoltre si nota la stringa Windows NT 5.1, un &ldquo;altro nome&rdquo; di Windows XP. Abbiamo dunque stabilito che questo utente usa Windows XP ed il browser Firefox.</p><p>Ora è necessario creare una funzione che analizzi le stringhe e ricavi automaticamente i dati dell&rsquo;utente. Per maggior chiarezza scriverò due funzioni diverse, una per il sistema operativo e una per il browser.</p><p>La stringa che dovremo esaminare è contenuta nell&rsquo;indice HTTP_USER_AGENT dell&rsquo;array superglobale $_SERVER, perciò potremo ottenerla in qualsiasi momento usando $_SERVER[&lsquo;HTTP_USER_AGENT&rsquo;].</p><p>Sistema Operativo</p><p>Girando nella rete, ho trovato la seguente tabella di riferimenti, che indica per ogni sistema operativo, che stringa c&rsquo;è nella richiesta dell&rsquo;utente:</p><pre><code>
Windows (generico)	Win
Windows XP		Windows NT 5.1
Windows 2000		Windows NT 5.0
Windows ME		Windows NT 4.90
Windows 95		Win95
Windows 98		Win98
Windows Net		Windows NT 5.2
Windows NT		WinNT4.0
Mac			Mac oppure PPC
Linux			Linux
FreeBSD			FreeBSD
SunOS			SunOS
Irix			Irix
BeOS			BeOS
OS/2			OS/2
AIX			AIX
</code></pre><p>Naturalmente nulla vi vieta di cercare le stringhe relative agli altri sistemi operativi!</p><p>Ecco quindi come potrebbe essere strutturata la funzione:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
<span style=color:#66d9ef>function</span> <span style=color:#a6e22e>GetSistemaOperativo</span>()
{
   $os <span style=color:#f92672>=</span> <span style=color:#66d9ef>array</span>(
       <span style=color:#e6db74>&#39;Windows NT 5.1&#39;</span>  <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Windows XP&#39;</span>,
       <span style=color:#e6db74>&#39;Windows NT 5.0&#39;</span>  <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Windows 2000&#39;</span>,
       <span style=color:#e6db74>&#39;Windows NT 4.90&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Windows ME&#39;</span>,
       <span style=color:#e6db74>&#39;Win95&#39;</span>           <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Windows 95&#39;</span>,
       <span style=color:#e6db74>&#39;Win98&#39;</span>           <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Windows 98&#39;</span>,
       <span style=color:#e6db74>&#39;Windows NT 5.2&#39;</span>  <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Windows NET&#39;</span>,
       <span style=color:#e6db74>&#39;WinNT4.0&#39;</span>        <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Windows NT&#39;</span>,
       <span style=color:#e6db74>&#39;Mac&#39;</span>             <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Mac&#39;</span>,
       <span style=color:#e6db74>&#39;PPC&#39;</span>             <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Mac&#39;</span>,
       <span style=color:#e6db74>&#39;Linux&#39;</span>           <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Linux&#39;</span>,
       <span style=color:#e6db74>&#39;FreeBSD&#39;</span>         <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;FreeBSD&#39;</span>,
       <span style=color:#e6db74>&#39;SunOS&#39;</span>           <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;SunOS&#39;</span>,
       <span style=color:#e6db74>&#39;Irix&#39;</span>            <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Irix&#39;</span>,
       <span style=color:#e6db74>&#39;BeOS&#39;</span>            <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;BeOS&#39;</span>,
       <span style=color:#e6db74>&#39;OS/2&#39;</span>            <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;OS/2&#39;</span>,
       <span style=color:#e6db74>&#39;AIX&#39;</span>             <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;AIX&#39;</span>,
   );

   <span style=color:#66d9ef>foreach</span>($os <span style=color:#66d9ef>as</span> $chiave <span style=color:#f92672>=&gt;</span> $valore)
   {
       <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>strpos</span>($_SERVER[<span style=color:#e6db74>&#39;HTTP_USER_AGENT&#39;</span>], $chiave))
       {
           <span style=color:#66d9ef>return</span> $valore;
       }
   }

   <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;Altro&#39;</span>;
}
<span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010> 
</span></code></pre></div><p>Prima di tutto memorizziamo in un array i sistemi operativi. Ogni valore è un sistema operativo e l&rsquo;indice relativo rappresenta la stringa che deve essere presente nella richiesta HTTP. Noterete che il valore Mac è presente due volte, prima con indice &ldquo;Mac&rdquo; e poi con indice &ldquo;PPC&rdquo;. Questo perchè il sistema operativo sarà Mac in entrambi i casi.</p><p>Se volete aggiungere altri sistemi operativi basta accodarli all&rsquo;array $os.</p><p>Dopo aver costruito l&rsquo;array, questo viene analizzato in un ciclo foreach. Per ogni elemento, viene controllato, con la funzione strpos, se l&rsquo;indice è presente in $_SERVER[&lsquo;HTTP_USER_AGENT&rsquo;]. In caso positivo ritornerà il valore di quell&rsquo;elemento.</p><p>Se non viene trovato nessun valore corrispondente, il ciclo foreach termina e la funzione ritorna la stringa &ldquo;Altro&rdquo;, per indicare che non è stato identificato nessun sistema operativo.</p><p>Browser</p><p>Come vedrete, la funzione per ricavare il browser è molto simile alla precedente.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
<span style=color:#66d9ef>function</span> <span style=color:#a6e22e>GetBrowser</span>()
{
   $browser <span style=color:#f92672>=</span> <span style=color:#66d9ef>array</span>(
       <span style=color:#e6db74>&#39;MSIE&#39;</span>      <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Internet Explorer&#39;</span>,
       <span style=color:#e6db74>&#39;Firefox&#39;</span>   <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;FireFox&#39;</span>,
       <span style=color:#e6db74>&#39;Lynx&#39;</span>      <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Lynx&#39;</span>,
       <span style=color:#e6db74>&#39;Opera&#39;</span>     <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Opera&#39;</span>,
       <span style=color:#e6db74>&#39;WebTV&#39;</span>     <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;WebTV&#39;</span>,
       <span style=color:#e6db74>&#39;Konqueror&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Konqueror&#39;</span>,
       <span style=color:#e6db74>&#39;bot&#39;</span>       <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Bot&#39;</span>,
       <span style=color:#e6db74>&#39;Google&#39;</span>    <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Bot&#39;</span>,
       <span style=color:#e6db74>&#39;slurp&#39;</span>     <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Bot&#39;</span>,
       <span style=color:#e6db74>&#39;scooter&#39;</span>   <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Bot&#39;</span>,
       <span style=color:#e6db74>&#39;spider&#39;</span>    <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Bot&#39;</span>,
       <span style=color:#e6db74>&#39;infoseek&#39;</span>  <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Bot&#39;</span>,
       <span style=color:#e6db74>&#39;Nav&#39;</span>       <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Netscape&#39;</span>,
       <span style=color:#e6db74>&#39;Gold&#39;</span>      <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Netscape&#39;</span>,
       <span style=color:#e6db74>&#39;x11&#39;</span>       <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Netscape&#39;</span>,
       <span style=color:#e6db74>&#39;Netscape&#39;</span>  <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Netscape&#39;</span>
   );

   <span style=color:#66d9ef>foreach</span>($browser <span style=color:#66d9ef>as</span> $chiave <span style=color:#f92672>=&gt;</span> $valore)
   {
       <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>strpos</span>($_SERVER[<span style=color:#e6db74>&#39;HTTP_USER_AGENT&#39;</span>], $chiave ))
       {
           <span style=color:#66d9ef>return</span> $valore;
       }
   }

   <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;Altro&#39;</span>;
}
<span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>La nostra funzione esaminerà la stringa verificando se in essa è contenuta una parola che identifica il browser. Per comodità, creiamo un array nel quale ogni valore è il nome di un browser, e il relativo indice è costituito dalla parola che lo identifica.</p><p>Successivamente con un ciclo foreach esamino tutti i valori dell&rsquo;array e, con la funzione strpos, verifico la presenza dell&rsquo;indice nella stringa. Se l&rsquo;indice è presente, restituisco il valore (ovvero il nome del browser). Se non viene trovato nessun browser, il ciclo foreach termina e la funzione restituisce &ldquo;Altro&rdquo;.</p></div></article></main><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=/articoli/disabilitare-il-register-globals/ rel=prev><span class=pager__subtitle>«&#8201;Precedente</span><p class=pager__title>Disabilitare il register_globals</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=/articoli/istruzioni-casuali/ rel=next><span class=pager__subtitle>Prossimo&#8201;»</span><p class=pager__title>Istruzioni "casuali"</p></a></div></nav></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2021 Giovanni Tomasicchio.
<span class=footer__copyright-credits>Generato con <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> e il tema <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a>.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>