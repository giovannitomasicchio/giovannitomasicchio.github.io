<!doctype html><html class=no-js lang=it><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Controller e Action - Giovanni Tomasicchio</title><script>(function(a,b){a[b]=a[b].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="Il ruolo dei controller e delle action in una applicazione Zend Framework"><meta property="og:title" content="Controller e Action"><meta property="og:description" content="Il ruolo dei controller e delle action in una applicazione Zend Framework"><meta property="og:type" content="article"><meta property="og:url" content="https://giovannitomasicchio.github.io/corsi/corso-zend-framework/controller-action/"><meta property="article:section" content="corsi"><meta property="article:published_time" content="2010-12-28T16:15:05+00:00"><meta property="article:modified_time" content="2010-12-28T16:15:05+00:00"><meta itemprop=name content="Controller e Action"><meta itemprop=description content="Il ruolo dei controller e delle action in una applicazione Zend Framework"><meta itemprop=datePublished content="2010-12-28T16:15:05+00:00"><meta itemprop=dateModified content="2010-12-28T16:15:05+00:00"><meta itemprop=wordCount content="582"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Controller e Action"><meta name=twitter:description content="Il ruolo dei controller e delle action in una applicazione Zend Framework"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,regular,italic,600,600italic,700,700italic,800,800italic|Kaushan+Script:regular"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/custom.css><link rel="shortcut icon" href=/favicon.ico><script async src="https://www.googletagmanager.com/gtag/js?id=G-525H86QENV"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-525H86QENV',{anonymize_ip:!1})}</script></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Giovanni Tomasicchio" rel=home><div class="logo__item logo__text"><div class=logo__title>Giovanni Tomasicchio</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/articoli/><span class=menu__text>Articoli PHP</span></a></li><li class=menu__item><a class=menu__link href=/corsi/><span class=menu__text>Corsi</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Controller e Action</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2010-12-28T16:15:05Z>28 December 2010</time></div></div></header><div class="content post__content clearfix"><p>Prima di procedere, è importante capire come lo Zend Framework si aspetta che siano organizzate le pagine. Ogni pagina dell&rsquo;applicazione è detta &ldquo;action&rdquo; e più action vengono raggruppate all&rsquo;interno di un controller. Per un URL del formato http://localhost/public/zf-tutorial/news/view, il controller è News e l&rsquo;action è view. Ciò permette il raggruppamento delle action fra loro correlate. Per esempio, un controller News può avere delle action differenti per la lista, l&rsquo;archivio e la visualizzazione delle news.</p><p>Il sistema MVC di Zend Framework supporta anche i moduli per il raggruppamento dei controller. L&rsquo;applicazione che stiamo costruendo però non è così grande da necessitare di moduli differenti.</p><p>Di default i controller di Zend Framework riservano una specifica action di default chiamata index. Questa è l&rsquo;action impiegata per gli URL simili al seguente: http://localhost/zf-tutorial/public/news/ per cui l&rsquo;action index è esecuita dal controller News. C&rsquo;è anche un controller di default chiamato index, così l&rsquo;URL http://localhost/zf-tutorial/public chiamerà ed eseguirà l&rsquo;action index del controller Index.</p><p>Dato che questo è solo un semplice tutorial, non faremo cose complicate come il login nell&rsquo;applicazione! Per questo argomento sono disponibili dei <a href=http://akrabat.com/zend-auth-tutorial/>tutorial dedicati</a> (o si può leggere <a href=http://www.zendframeworkinaction.com/>Zend Framework in Action</a>).</p><p>Poiché ci saranno quattro pagine tutte relative agli album, le raggrupperemo in un unico controller realizzando quattro action. Useremo il controller di default e le quattro action saranno:</p><table><thead><tr><th>Pagina</th><th>Controller</th><th>Action</th></tr></thead><tbody><tr><td>Home page</td><td>Index</td><td>index</td></tr><tr><td>Add new album</td><td>Index</td><td>add</td></tr><tr><td>Edit album</td><td>Index</td><td>edit</td></tr><tr><td>Delete album</td><td>Index</td><td>delete</td></tr></tbody></table><p>Per un sito più complicato, saranno necessari controller aggiuntivi e li si potrà raggruppare in moduli, se necessario.</p><h3 id=impostare-i-controller>Impostare i controller</h3><p>Siamo ora pronti ad impostare il nostro controller. In Zend Framework, il controller è una classe che si deve chiamare {Nome controller}Controller. Da notare che {Nome controller} deve iniziare con la lettera maiuscola. Questa classe deve corrispondere ad un file di nome {Nome controller}Controller.php nella directory &ldquo;controllers&rdquo; di application/. Ogni action è un metodo di tipo public della classe controller che deve chiamarsi {nome action}Action. In questo caso {nome action} inizia con la lettera minuscola e deve essere scritto tutto in minuscolo. E' permesso creare nomi per controller e action che mischiano lettere maiuscole e minuscole ma prima bisogna conoscere e seguire delle speciali regole da approfondire nella documentazione ufficiale!</p><p>La nostra classe controller si chiama IndexController che è definita nel file application/controllers/IndexController.php creato automaticamente da Zend_Tool. Inoltre contiene già il primo metodo action, indexAction(). Dobbiamo solamente aggiungere le altre action.</p><p>Per aggiungere altre action al controller si può usare il comando zf create action da terminale. Dunque basta aprire un terminale o il Prompt dei comandi, cambiare la directory in zf-tutorial/. Poi digitare questi comandi:</p><pre><code>
zf create action add Index
zf create action edit Index
zf create action delete Index
</code></pre><p>Questi comandi creano 3 nuovi metodi: addAction, editAction e deleteAction in IndexController ed inoltre creano gli script view appropriati che serviranno successivamente. Adesso abbiamo le nostre 4 action.</p><p>Gli URL di ogni action sono:</p><table><thead><tr><th>URL</th><th>metodo Action</th></tr></thead><tbody><tr><td>http://localhost/zf-tutorial/public/</td><td>IndexController::indexAction()</td></tr><tr><td>http://localhost/zf-tutorial/public/index/add</td><td>IndexController::addAction()</td></tr><tr><td>http://localhost/zf-tutorial/public/index/edit</td><td>IndexController::editAction()</td></tr><tr><td>http://localhost/zf-tutorial/public/index/delete</td><td>IndexController::deleteAction()</td></tr></tbody></table><p>Possiamo testare le 3 nuove action e dovremmo vedere un messaggio come questo:</p><pre><code>
View script for controller index and script/action name add
</code></pre><p>Se si ottiene un errore 404, allora non è stato configurato correttamente Apache con il modulo mod_rewrite o non è stato impostato correttamente l&rsquo;AllowOverride nel file di configurazione di Apache per utilizzare il file .htaccess presente nella cartella public/.</p><p>Se si sta sviluppando un sito in spazio &ldquo;utente&rdquo; (per es. http://localhost/~rob), allora si necessita di una riga di RewriteBase nel proprio .htaccess del tipo: RewriteBase /~rob/zf-tutorial/public/.</p></div></article></main><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=/corsi/corso-zend-framework/configurazione-bootstrap/ rel=prev><span class=pager__subtitle>«&#8201;Precedente</span><p class=pager__title>Configurazione e bootstrap</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=/corsi/corso-zend-framework/preparazione-del-database/ rel=next><span class=pager__subtitle>Prossimo&#8201;»</span><p class=pager__title>Preparazione del database</p></a></div></nav></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2021 Giovanni Tomasicchio.
<span class=footer__copyright-credits>Generato con <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> e il tema <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a>.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>