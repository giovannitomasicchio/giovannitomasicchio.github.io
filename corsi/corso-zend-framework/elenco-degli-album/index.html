<!doctype html><html class=no-js lang=it><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Elenco degli album - Giovanni Tomasicchio</title><script>(function(a,b){a[b]=a[b].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="Visualizzazione dell'elenco dei record letti dal database in una applicazione MVC con Zend Framework"><meta property="og:title" content="Elenco degli album"><meta property="og:description" content="Visualizzazione dell'elenco dei record letti dal database in una applicazione MVC con Zend Framework"><meta property="og:type" content="article"><meta property="og:url" content="https://giovannitomasicchio.github.io/corsi/corso-zend-framework/elenco-degli-album/"><meta property="article:section" content="corsi"><meta property="article:published_time" content="2010-12-28T16:25:28+00:00"><meta property="article:modified_time" content="2010-12-28T16:25:28+00:00"><meta itemprop=name content="Elenco degli album"><meta itemprop=description content="Visualizzazione dell'elenco dei record letti dal database in una applicazione MVC con Zend Framework"><meta itemprop=datePublished content="2010-12-28T16:25:28+00:00"><meta itemprop=dateModified content="2010-12-28T16:25:28+00:00"><meta itemprop=wordCount content="311"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Elenco degli album"><meta name=twitter:description content="Visualizzazione dell'elenco dei record letti dal database in una applicazione MVC con Zend Framework"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,regular,italic,600,600italic,700,700italic,800,800italic|Kaushan+Script:regular"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/custom.css><link rel="shortcut icon" href=/favicon.ico><script async src="https://www.googletagmanager.com/gtag/js?id=G-525H86QENV"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-525H86QENV',{anonymize_ip:!1})}</script></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Giovanni Tomasicchio" rel=home><div class="logo__item logo__text"><div class=logo__title>Giovanni Tomasicchio</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/articoli/><span class=menu__text>Articoli PHP</span></a></li><li class=menu__item><a class=menu__link href=/corsi/><span class=menu__text>Corsi</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Elenco degli album</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2010-12-28T16:25:28Z>28 December 2010</time></div></div></header><div class="content post__content clearfix"><p>Ora che si è impostata la configurazione, le informazioni per il database e lo scheletro delle viste, possiamo entrare nel cuore dell&rsquo;applicazione e visualizzare gli album. Ciò avviene nella classe IndexController ed inizieremo con il visualizzare gli album in una tabella con il metodo indexAction():</p><p>zf-tutorial/application/controllers/IndexController.php</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#f92672>...</span>
<span style=color:#66d9ef>function</span> <span style=color:#a6e22e>indexAction</span>()
{
   $albums <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Application_Model_DbTable_Albums</span>();
   $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>view</span><span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>albums</span> <span style=color:#f92672>=</span> $albums<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>fetchAll</span>();
}
<span style=color:#f92672>...</span>
</code></pre></div><p>Istanziamo il nostro model basato sul pattern &ldquo;table data gateway&rdquo;. Il metodo fetchAll() restituisce un oggetto Zend_Db_Table_Rowset che ci permetterà di ciclare sulle righe ottenute all&rsquo;interno dello script view dell&rsquo;action.</p><p>Possiamo ora completare lo script view associato: index.phtml:</p><p>zf-tutorial/application/views/scripts/index/index.phtml</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
   $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>title</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;My Albums&#34;</span>;
   $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>headTitle</span>($this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>title</span>);
<span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>&lt;p&gt;&lt;a href=&#34;&lt;?php echo $this-&gt;url(array(&#39;controller&#39;=&gt;&#39;index&#39;,
</span><span style=color:#960050;background-color:#1e0010>   &#39;action&#39;=&gt;&#39;add&#39;));?&gt;&#34;&gt;Add new album&lt;/a&gt;&lt;/p&gt;
</span><span style=color:#960050;background-color:#1e0010>&lt;table&gt;
</span><span style=color:#960050;background-color:#1e0010>&lt;tr&gt;
</span><span style=color:#960050;background-color:#1e0010>   &lt;th&gt;Title&lt;/th&gt;
</span><span style=color:#960050;background-color:#1e0010>   &lt;th&gt;Artist&lt;/th&gt;
</span><span style=color:#960050;background-color:#1e0010>   &lt;th&gt;&amp;nbsp;&lt;/th&gt;
</span><span style=color:#960050;background-color:#1e0010>&lt;/tr&gt;
</span><span style=color:#960050;background-color:#1e0010>&lt;?php foreach($this-&gt;albums as $album) : ?&gt;
</span><span style=color:#960050;background-color:#1e0010>&lt;tr&gt;
</span><span style=color:#960050;background-color:#1e0010>   &lt;td&gt;&lt;?php echo $this-&gt;escape($album-&gt;title);?&gt;&lt;/td&gt;
</span><span style=color:#960050;background-color:#1e0010>   &lt;td&gt;&lt;?php echo $this-&gt;escape($album-&gt;artist);?&gt;&lt;/td&gt;
</span><span style=color:#960050;background-color:#1e0010>   &lt;td&gt;
</span><span style=color:#960050;background-color:#1e0010>   &lt;a href=&#34;&lt;?php echo $this-&gt;url(array(&#39;controller&#39;=&gt;&#39;index&#39;,
</span><span style=color:#960050;background-color:#1e0010>       &#39;action&#39;=&gt;&#39;edit&#39;, &#39;id&#39;=&gt;$album-&gt;id));?&gt;&#34;&gt;Edit&lt;/a&gt;
</span><span style=color:#960050;background-color:#1e0010>   &lt;a href=&#34;&lt;?php echo $this-&gt;url(array(&#39;controller&#39;=&gt;&#39;index&#39;,
</span><span style=color:#960050;background-color:#1e0010>       &#39;action&#39;=&gt;&#39;delete&#39;, &#39;id&#39;=&gt;$album-&gt;id));?&gt;&#34;&gt;Delete&lt;/a&gt;
</span><span style=color:#960050;background-color:#1e0010>   &lt;/td&gt;
</span><span style=color:#960050;background-color:#1e0010>&lt;/tr&gt;
</span><span style=color:#960050;background-color:#1e0010>&lt;?php endforeach; ?&gt;
</span><span style=color:#960050;background-color:#1e0010>&lt;/table&gt;
</span></code></pre></div><p>La prima cosa che facciamo è impostare il titolo della pagina (usato nel layout) ed impostare il titolo per la sezione &lt;head>, usando il view helper headTitle(), che verrà mostrato nella barra del titolo del browser. Creiamo poi un link per aggiungere un nuovo album. Il view helper url() fornito dal framework ci aiuta a creare i link con il corretto URL. Basta passergli in input un array di parametri e lui farà il resto.</p><p>Poi creiamo una tabella html in cui visualizzare per ciascun album il titolo, gli artisti ed i link per la modifica e cancellazione del record. Usiamo un classico ciclo foreach per iterare sulla lista degli album, impiegando la sintassi alternativa che fa uso del due punti e dell&rsquo;endforeach, più semplice da leggere rispetto alle parentesi graffe. Ancora una volta usiamo il view helper url() per creare i link di modifica e cancellazione.</p><p>Se si apre http://localhost/zf-tutorial/public/ si dovrebbe adesso vedere un elenco di album, qualcosa del genere:</p><p><img src=/image/corsi/introduzione_zend_framework/my_albums.png alt="Elenco degli album"></p></div></article></main><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=/corsi/corso-zend-framework/utilizzare-un-foglio-di-stile/ rel=prev><span class=pager__subtitle>«&#8201;Precedente</span><p class=pager__title>Utilizzare un foglio di stile</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=/corsi/corso-zend-framework/inserire-un-nuovo-album/ rel=next><span class=pager__subtitle>Prossimo&#8201;»</span><p class=pager__title>Inserire un nuovo album</p></a></div></nav></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2021 Giovanni Tomasicchio.
<span class=footer__copyright-credits>Generato con <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> e il tema <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a>.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>