<!doctype html><html class=no-js lang=it><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Debug degli script PHP/MySQL - Giovanni Tomasicchio</title><script>(function(a,b){a[b]=a[b].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="Risolvere gli errori di uno script PHP MySQL. Debug degli script PHP/MySQL"><meta property="og:title" content="Debug degli script PHP/MySQL"><meta property="og:description" content="Risolvere gli errori di uno script PHP MySQL. Debug degli script PHP/MySQL"><meta property="og:type" content="article"><meta property="og:url" content="https://giovannitomasicchio.github.io/corsi/corso-php-mysql/debug-degli-script-php-mysql/"><meta property="article:section" content="corsi"><meta property="article:published_time" content="2006-08-26T18:03:45+00:00"><meta property="article:modified_time" content="2006-08-26T18:03:45+00:00"><meta itemprop=name content="Debug degli script PHP/MySQL"><meta itemprop=description content="Risolvere gli errori di uno script PHP MySQL. Debug degli script PHP/MySQL"><meta itemprop=datePublished content="2006-08-26T18:03:45+00:00"><meta itemprop=dateModified content="2006-08-26T18:03:45+00:00"><meta itemprop=wordCount content="1198"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Debug degli script PHP/MySQL"><meta name=twitter:description content="Risolvere gli errori di uno script PHP MySQL. Debug degli script PHP/MySQL"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,regular,italic,600,600italic,700,700italic,800,800italic|Kaushan+Script:regular"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/custom.css><link rel="shortcut icon" href=/favicon.ico><script async src="https://www.googletagmanager.com/gtag/js?id=G-525H86QENV"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-525H86QENV',{anonymize_ip:!1})}</script></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Giovanni Tomasicchio" rel=home><div class="logo__item logo__text"><div class=logo__title>Giovanni Tomasicchio</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/articoli/><span class=menu__text>Articoli PHP</span></a></li><li class=menu__item><a class=menu__link href=/corsi/><span class=menu__text>Corsi</span></a></li><li class=menu__item><a class=menu__link href=/contatti/><span class=menu__text>Contatti</span></a></li><li class=menu__item><a class=menu__link href=/ricerca/><span class=menu__text>Ricerca</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Debug degli script PHP/MySQL</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2006-08-26T18:03:45Z>26 August 2006</time></div></div></header><div class="content post__content clearfix"><p>Individuare i bachi di uno script PHP/MySQL ed interpretare correttamente le segnalazioni di errore può essere un compito non banale, sopratutto se si è alle prime armi. Inutile sottolineare che una corretta impostazione degli script ed una adeguata gestione degli errori facilitano le operazioni di debug e sopratutto riducono la probabilità di malfunzionamenti del codice. Senza alcuna pretesa di completezza, di seguito vengono proposte alcune linee guida da seguire nella realizzazione di script PHP/MySQL:</p><ul><li>Durante la fase di sviluppo, impostare il livello di segnalazione degli errori al massimo; attraverso il php.ini, impostando la direttiva &ldquo;error_reporting&rdquo; a &ldquo;E_ALL&rdquo;, oppure direttamente da script, con l&rsquo;istruzione error_reporting(E_ALL) da inserire all&rsquo;inizio del codice. E' più semplice risolvere un baco quando si hanno informazioni anche sulle anomalie considerate (forse a torto) meno importanti.</li><li>Controllare l&rsquo;esito delle funzioni mysql_connect, mysql_select_db, mysql_query ecc. verificando il valore che restituiscono e confrontandolo con quello atteso. Ad esempio se il valore restituito da mysql_query è false allora la query non è corretta.</li><li>Usare il carattere @ anteposto alle funzioni mysql come &ldquo;silenziatore&rdquo; dei messaggi di errore solo se l&rsquo;esito della funzione stessa viene verificato in altro modo. In caso contrario un errore passerebbe inosservato.</li><li>Interrompere l&rsquo;esecuzione dello script al primo errore segnalato. Si eviterà così la generazione di errori a catena che possono confondere e complicare la ricerca della causa primaria del malfunzionamento. Ad esempio, è inutile cercare di eseguire una query quando la connessione al server non ha avuto successo. Si otterrebbe un errore anche per la query ma il realtà il problema è a monte.</li><li>Memorizzare tutte le query create dinamicamente in una variabile prima di lanciarle con la funzione mysql_query. In caso di errore mostrare il contenuto di questa variabile, ad esempio con la funzione die(), per verificare se la costruzione della query è corretta.</li><li>Prima di realizzare lo script provare ad eseguire le query direttamente con un client MySQL in modo da essere sicuri della loro correttezza. Come approfondiremo più avanti, è importante saper distinguere tra gli errori dell&rsquo;SQL e quelli dello script PHP.</li></ul><p>Nonostante tutte le precauzioni che è possibile (e doveroso) prendere, prima o poi qualcosa nei vostri script andrà storto e vi ritroverete ad interpretare le classiche segnalazioni di errore di PHP, alcune delle quali possono risultare davvero sibilline. Di seguito vengono riportate quelle più comuni insieme alla spiegazione delle possibili cause e soluzioni.</p><p><strong>Fatal error: Call to undefined function mysql_connect()</strong></p><p>PHP non riconosce la funzione mysql_connect() a causa del mancato caricamento del modulo mysql. Solo la versione Windows di PHP 4 ha il modulo mysql già presente all&rsquo;interno di PHP. Trovate le istruzioni per caricare il modulo mysql con PHP 5 su Windows XP in questo articolo. Con Linux è invece necessario ricompilare PHP con l&rsquo;opzione &ndash;with-mysql oppure installare i pacchetti (RPM, deb, ecc.) opportuni offerti dalla distribuzione in uso.</p><p><strong>Warning: mysql_connect() [function.mysql-connect]: Unknown MySQL server host &lsquo;nome_server&rsquo; (11001)</strong></p><p>PHP non riesce ad individuare l&rsquo;host (la macchina) su cui dovrebbe girare il server MySQL. Controllare quindi la sintassi del nome_server.</p><p><strong>Warning: mysql_connect() [function.mysql-connect]: Can&rsquo;t connect to MySQL server on &lsquo;localhost&rsquo; (10061)</strong></p><p>Nella maggior parte dei casi questo errore si verifica se il server MySQL non è attivo. In Windows è facile verificarlo, accedendo al Task Manager (Ctrl+Alt+Canc) e verificando la presenza di un processo dal nome mysqld-nt.exe. Con linux si può invece cercare il demone mysqld dalla shell con il comando &ldquo;ps aux&rdquo;. Se non è attivo le cause possono essere diverse: MySQL non è stato installato, l&rsquo;installazione non è stata completata correttamente, MySQL semplicemente non è stato avviato. Se state cercando di collegarvi ad un server remoto (non in localhost), la connessione potrebbe essere impedita da un firewall, oppure MySQL potrebbe essere stato configurato per non accettare connessioni dall&rsquo;esterno.</p><p><strong>Warning: mysql_connect() [function.mysql-connect]: Access denied for user &lsquo;nome&rsquo;@&lsquo;localhost&rsquo; (using password: YES/NO)</strong></p><p>Il nome e/o la password forniti alla funzione mysql_connect() non sono corretti. L&rsquo;errore mostra il nome utente e l&rsquo;host al quale ci si sta connettendo e pertanto potrebbe costituire un problema di sicurezza. In questo caso è consigliato usare il silenziatore degli errori @ e verificare l&rsquo;esito di mysql_connect controllandone il risultato restituito.</p><p><strong>Client does not support authentication protocol requested by server; consider upgrading MySQL client</strong></p><p>Tipico errore che si presenta la prima volta che si esegue uno script di connessione con PHP 4 a MySQL 4.1 o successivi. PHP 4 infatti viene distribuito con una libreria per l&rsquo;accesso a MySQL che non supporta la nuova modalità di connessione introdotta con MySQL 4.1 e pertanto il tentativo fallisce. Una possibile soluzione risiede nell&rsquo;indicare a MySQL di usare il vecchio metodo di autenticazione. Per farlo basta lanciare questa query impiegando un client MySQL:</p><p>SET PASSWORD FOR &lsquo;nome_uteste&rsquo;@&lsquo;nome_host&rsquo; = OLD_PASSWORD(&lsquo;nuova_password&rsquo;);</p><p><strong>Unknown database &lsquo;db_inesistente&rsquo;</strong></p><p>E' stata eseguita l&rsquo;istruzione mysql_select_db() specificando il nome di un database che però non esiste. Controllare quindi il nome del database indicato.</p><p><strong>Warning: mysql_select_db(): supplied argument is not a valid MySQL-Link resource</strong></p><p>Il messaggio avverte che il secondo parametro passato alla funzione mysql_select_db() non è un valido identificativo di connessione MySQL, ovvero il valore restituito da una mysql_connect() eseguita con successo. Una delle cause più frequenti è un fallito tentativo di connessione al server MySQL ed il successivo tentativo di selezione del database. In tal caso quindi bisogna verificare la procedura di connessione. Oppure, più banalmente, il secondo parametro passato a mysql_select_db() non è il risultato restituito dalla mysql_connect().</p><p><strong>Warning: mysql_fetch_array(): supplied argument is not a valid MySQL result resource</strong></p><p><strong>Warning: mysql_free_result(): supplied argument is not a valid MySQL result resource</strong></p><p>Il messaggio avverte che il parametro passato all&rsquo;istruzione di fetch o alla mysql_free_result() non è un valido &ldquo;MySQL result resource&rdquo;, ovvero quella particolare &ldquo;ricevuta&rdquo; restituita da mysql_query() in caso di una SELECT eseguita con successo (se n&rsquo;è discusso nella <a href=/corsi/corso-php-mysql/selezione-dati-recupero-risultati-i/>Lezione 6</a>). Probabilmente quindi stiamo cercando di effettuare un operazione sul set di risultati ma in realtà tali dati non esistono perché la query non ha avuto successo. Oppure, più banalmente, il parametro passato all&rsquo;istruzione di fetch o alla mysql_free_result() non è il risultato restituito da mysql_query().</p><p>Questi errori si verificano quando è stata effettuata una query contenente degli errori. L&rsquo;istruzione mysql_query ha segnalato il problema restituendo il valore FALSE ma nello script non c&rsquo;è stato un controllo su tale valore. Lo script pertanto prosegue fino ad arrivare alle istruzioni di fetch che però non possono agire poiché non esiste un set di risultati.</p><h3 id=errori-nella-sintassi-delle-query>Errori nella sintassi delle query</h3><p>Le segnalazioni di errore fin qui mostrate vengono generate da PHP, ad esempio perché non è in grado di connettersi al server MySQL, oppure perché le funzioni non vengono adoperate correttamente. Sono quindi errori che coinvolgono PHP direttamente che pertanto provvede subito a segnalarli con dei Warning. Ci sono però errori che non riguardano PHP ma si verificano nel server MySQL, generati ad esempio da una query con sintassi errata. In questi casi è MySQL ad accorgersi del problema ma non potendo comunicare direttamente con l&rsquo;utente, può solo segnalare l&rsquo;accaduto a PHP che a sua volta si limita a restituire FALSE come risultato della mysql_query(). Tali errori quindi possono passare del tutto inosservati se nello script PHP non vengono implementati gli opportuni controlli. Per simili errori la funzione mysql_error() è l&rsquo;unica a poterci dare informazioni precise sul problema verificatosi.</p></div></article></main><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=/corsi/corso-php-mysql/aggiornamento-dei-dati/ rel=prev><span class=pager__subtitle>«&#8201;Precedente</span><p class=pager__title>Aggiornamento dei dati</p></a></div></nav><section class=comments><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//giovannitomasicchio-it.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2021 Giovanni Tomasicchio.
<span class=footer__copyright-credits>Generato con <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> e il tema <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a>.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>