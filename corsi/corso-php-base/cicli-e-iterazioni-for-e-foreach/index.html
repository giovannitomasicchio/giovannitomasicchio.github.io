<!doctype html><html class=no-js lang=it><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Cicli e iterazioni: for e foreach - Giovanni Tomasicchio</title><script>(function(a,b){a[b]=a[b].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="Cicli e iterazioni negli script PHP, i costrutti FOR e FOREACH"><meta property="og:title" content="Cicli e iterazioni: for e foreach"><meta property="og:description" content="Cicli e iterazioni negli script PHP, i costrutti FOR e FOREACH"><meta property="og:type" content="article"><meta property="og:url" content="https://giovannitomasicchio.github.io/corsi/corso-php-base/cicli-e-iterazioni-for-e-foreach/"><meta property="article:section" content="corsi"><meta property="article:published_time" content="2005-07-13T22:34:09+00:00"><meta property="article:modified_time" content="2005-07-13T22:34:09+00:00"><meta itemprop=name content="Cicli e iterazioni: for e foreach"><meta itemprop=description content="Cicli e iterazioni negli script PHP, i costrutti FOR e FOREACH"><meta itemprop=datePublished content="2005-07-13T22:34:09+00:00"><meta itemprop=dateModified content="2005-07-13T22:34:09+00:00"><meta itemprop=wordCount content="1316"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Cicli e iterazioni: for e foreach"><meta name=twitter:description content="Cicli e iterazioni negli script PHP, i costrutti FOR e FOREACH"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,regular,italic,600,600italic,700,700italic,800,800italic|Kaushan+Script:regular"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/custom.css><link rel="shortcut icon" href=/favicon.ico><script async src="https://www.googletagmanager.com/gtag/js?id=G-525H86QENV"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-525H86QENV',{anonymize_ip:!1})}</script></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Giovanni Tomasicchio" rel=home><div class="logo__item logo__text"><div class=logo__title>Giovanni Tomasicchio</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/articoli/><span class=menu__text>Articoli PHP</span></a></li><li class=menu__item><a class=menu__link href=/corsi/><span class=menu__text>Corsi</span></a></li><li class=menu__item><a class=menu__link href=/contatti/><span class=menu__text>Contatti</span></a></li><li class=menu__item><a class=menu__link href=/ricerca/><span class=menu__text>Ricerca</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Cicli e iterazioni: for e foreach</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2005-07-13T22:34:09Z>13 July 2005</time></div></div></header><div class="content post__content clearfix"><p>Avete presente la pagina principale di PHPnews.it? Nella colonna centrale sono presenti le ultime 10 news. Ciascuna è composta da un titolo, il testo della news e la data di pubblicazione. Sicuramente lo script PHP che si occupa di costruire questa pagina avrà delle istruzioni dedicate alla visualizzazione di una singola news. Fortunatamente per visualizzare 10 news non è necessario ricopiare tali righe per 10 volte nello script, è sufficiente invece istruire il PHP affinché la loro esecuzione venga ripetuta 10 volte.</p><p>Quello citato è solo un esempio di situazione nella quale ci si trova a ripetere un determinato compito per più volte (iterazioni). Ad ogni ciclo si eseguono le stesse istruzioni, quello che cambia sono i dati su cui agiscono tali istruzioni. Nel caso precedente ogni ciclo mostra un titolo, un testo ed una data differenti ma il codice che li visualizza è sempre lo stesso.</p><p>Diversi sono i costrutti che permettono di iterare più volte un gruppo di istruzioni. In questa lezione ci occuperemo dei cicli <strong>for</strong> e <strong>foreach</strong>.</p><h3 id=ciclo-for>Ciclo for</h3><p>Il ciclo for viene comunemente usato per realizzare delle iterazioni basate su un indice numerico. Questo indice viene prima impostato ad un valore iniziale, di solito 0 o 1. Ad ogni iterazione viene poi incrementato fino al raggiungimento di un valore finale, evento che determina l&rsquo;interruzione del ciclo.</p><p>In generale il ciclo for è costituito da un costrutto del tipo</p><p>for (espressione1 ; espressione2 ; espressione3)</p><p>seguito dal gruppo di istruzioni che andranno ripetute, raggruppate da una coppia di parentesi graffe.</p><p>L&rsquo;espressione1 viene eseguita una sola volta prima della prima iterazione. Viene utilizzata comunemente per inizializzare l&rsquo;indice di cui parlavamo. L&rsquo;espressione2 viene invece valutata all&rsquo;inizio di ogni ciclo. Se assume il valore true il ciclo viene effettuato. E' questa l&rsquo;espressione che verifica l&rsquo;eventuale raggiungimento del valore finale dell&rsquo;indice. L&rsquo;espressione3 viene invece eseguita al termine di ogni iterazione. Viene usata comunemente per incrementare il valore dell&rsquo;indice.</p><p>Adesso vediamo un esempio concreto, utilizzato per la visualizzazione del quadrato dei numeri da 1 a 10.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
<span style=color:#66d9ef>for</span> ($i<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> ; $i <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>10</span> ; $i<span style=color:#f92672>++</span>)
{
   $quadrato <span style=color:#f92672>=</span> $i<span style=color:#f92672>*</span>$i;
   <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;Il quadrato di </span><span style=color:#e6db74>$i</span><span style=color:#e6db74> è </span><span style=color:#e6db74>$quadrato</span><span style=color:#e6db74> &lt;br&gt;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>;
}
<span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>La variabile $i viene utilizzata come indice per questo ciclo. Il suo valore è impostato inizialmente ad 1 (espressione1: $i=1) e viene incrementato ad ogni iterazione (espressione3: $i++). Prima di ciascuna iterazione viene valutata l&rsquo;espressione2 $i &lt;= 10 così che quando $i supera il 10 il ciclo viene interrotto. Le istruzioni ad essere ripetute sono quelle racchiuse dalle parentesi graffe. Sono quelle che si occupano di calcolare e mostrare il quadrato dei numeri. Notiamo come queste istruzioni utilizzano direttamente l&rsquo;indice $i per eseguire tale compito. L&rsquo;utilizzo del ciclo for è infatti consigliato proprio quando le istruzioni da iterare fanno uso di un indice numerico.</p><p>Vediamo ora come scorrere gli elementi di un array e mostrarli all&rsquo;utente.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
<span style=color:#75715e>// array da scorrere
</span><span style=color:#75715e></span>$animali <span style=color:#f92672>=</span> <span style=color:#66d9ef>array</span>(<span style=color:#e6db74>&#39;cane&#39;</span>,<span style=color:#e6db74>&#39;gatto&#39;</span>,<span style=color:#e6db74>&#39;topo&#39;</span>,<span style=color:#e6db74>&#39;elefante&#39;</span>);

<span style=color:#75715e>// notare la prima espressione che inizializza sia $i che $n
</span><span style=color:#75715e></span><span style=color:#66d9ef>for</span> ($i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>, $n <span style=color:#f92672>=</span> <span style=color:#a6e22e>count</span>($animali) ; $i <span style=color:#f92672>&lt;</span> $n ; $i<span style=color:#f92672>++</span>)
{
   <span style=color:#66d9ef>echo</span> $animali[$i] , <span style=color:#e6db74>&#39;&lt;br&gt;&#39;</span>;
}
<span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>la particolarità di questo esempio sta sopratutto nella prima espressione. Tale espressione infatti inizializza non solo l&rsquo;indice $i a 0 ma assegna ad $n il numero degli elementi dell&rsquo;array da scorrere ($n = count($animali)). La seconda espressione usa proprio questo valore come limite per l&rsquo;indice $i. Notiamo come anche in questo esempio $i venga direttamente impiegato nell&rsquo;istruzione da iterare.</p><h3 id=ciclo-foreach>Ciclo foreach</h3><p>Il ciclo for, anche se molto potente e versatile, può risultare piuttosto macchinoso nell&rsquo;impiego di semplici compiti come l&rsquo;attraversamento di un array. In questi casi risulta più comodo l&rsquo;uso del ciclo foreach. Tale ciclo ha una sintassi del tipo:</p><p>foreach ($array_da_attraversare as $valore_elemento)</p><p>{</p><p>// istruzioni da iterare</p><p>}</p><p>Le istruzioni raggruppate nelle parentesi graffe verranno ripetute tante volte quanti sono gli elementi presenti nell&rsquo;array $array_da_attraversare. Ad ogni iterazione verrà letto un valore presente in tale array e copiato nella variabile $valore_elemento. Vediamo un esempio:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
$colori <span style=color:#f92672>=</span> <span style=color:#66d9ef>array</span>(<span style=color:#e6db74>&#39;bianco&#39;</span>,<span style=color:#e6db74>&#39;rosso&#39;</span>,<span style=color:#e6db74>&#39;verde&#39;</span>,<span style=color:#e6db74>&#39;blu&#39;</span>,<span style=color:#e6db74>&#39;giallo&#39;</span>,<span style=color:#e6db74>&#39;nero&#39;</span>);

<span style=color:#66d9ef>foreach</span> ($colori <span style=color:#66d9ef>as</span> $colore)
{
   <span style=color:#66d9ef>echo</span> $colore , <span style=color:#e6db74>&#39;&lt;br&gt;&#39;</span>;
}
<span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>Ad ogni iterazione la variabile $colore assumerà il valore di un elemento presente nell&rsquo;array $colori. E' chiaro quindi che un ciclo foreach serve a iterare delle operazioni che vanno eseguite sugli elementi di un array. Vediamo invece che succede se nell&rsquo;esempio precedente usiamo il ciclo foreach per effettuare una modifica ai valori contenuti nell&rsquo;array.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
$colori <span style=color:#f92672>=</span> <span style=color:#66d9ef>array</span>(<span style=color:#e6db74>&#39;bianco&#39;</span>,<span style=color:#e6db74>&#39;rosso&#39;</span>,<span style=color:#e6db74>&#39;verde&#39;</span>,<span style=color:#e6db74>&#39;blu&#39;</span>,<span style=color:#e6db74>&#39;giallo&#39;</span>,<span style=color:#e6db74>&#39;nero&#39;</span>);

<span style=color:#66d9ef>foreach</span> ($colori <span style=color:#66d9ef>as</span> $colore)
{
   $colore <span style=color:#f92672>=</span> <span style=color:#a6e22e>strtoupper</span>($colore);
}

<span style=color:#66d9ef>foreach</span> ($colori <span style=color:#66d9ef>as</span> $colore)
{
   <span style=color:#66d9ef>echo</span> $colore , <span style=color:#e6db74>&#39;&lt;br&gt;&#39;</span>;
}
<span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>Abbiamo attraversato 2 volte l&rsquo;array $colori. Una volta per modificare ogni suo elemento in modo che tutte le lettere fossero maiuscole (strtoupper). La seconda volta invece è servita a mostrarne il contenuto che però risulta inalterato! Perché? La causa di tale comportamento è riconducibile al fatto che la variabile $colore contiene solo la copia di un valore dell&rsquo;array $colori e pertanto non è direttamente collegato ad esso. La modifica alla variabile $colore quindi non influisce sul relativo valore dell&rsquo;array $colori. Per questo motivo i programmatori PHP fanno spesso ricorso al ciclo for per effettuare delle modifiche agli elementi di un array.</p><p>Con PHP 5 però le cose sono cambiate. Infatti è sufficiente porre il carattere & prima della variabile $colore nell&rsquo;espressione del ciclo foreach per far si che ogni modifica effettuata su di essa venga in realtà effettuata sul relativo valore dell&rsquo;array. L&rsquo;esempio seguente è identico al precedente, tranne che per il carattere & posto a sinistra della variabile $colore. Questa volta le modifiche ai valori dell&rsquo;array avranno effetto.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
$colori <span style=color:#f92672>=</span> <span style=color:#66d9ef>array</span>(<span style=color:#e6db74>&#39;bianco&#39;</span>,<span style=color:#e6db74>&#39;rosso&#39;</span>,<span style=color:#e6db74>&#39;verde&#39;</span>,<span style=color:#e6db74>&#39;blu&#39;</span>,<span style=color:#e6db74>&#39;giallo&#39;</span>,<span style=color:#e6db74>&#39;nero&#39;</span>);

<span style=color:#66d9ef>foreach</span> ($colori <span style=color:#66d9ef>as</span> <span style=color:#f92672>&amp;</span>$colore)
{
   $colore <span style=color:#f92672>=</span> <span style=color:#a6e22e>strtoupper</span>($colore);
}

<span style=color:#a6e22e>unset</span>($colore);

<span style=color:#66d9ef>foreach</span> ($colori <span style=color:#66d9ef>as</span> $colore)
{
   <span style=color:#66d9ef>echo</span> $colore , <span style=color:#e6db74>&#39;&lt;br&gt;&#39;</span>;
}
<span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p><strong>Attenzione</strong>: l&rsquo;utilizzo del carattere & fa si che alla fine del primo ciclo foreach la variabile $colore non è semplicemente una copia dell&rsquo;ultimo elemento dell&rsquo;array bensì è l&rsquo;utlimo elemento dell&rsquo;array. Per questa ragione dobbiamo &ldquo;distruggere&rdquo; $colore con l&rsquo;istruzione unset() prima di riutilizzare questa variabile nel secondo ciclo. In caso contrario il secondo foreach andrebbe a sovrascrivere ad ogni iterazione l&rsquo;utlimo elemento di $colori con ciascuno degli altri elementi dello stesso array.</p><p>Mostriamo adesso un ultima variante, non meno importante, della sintassi del ciclo foreach che permette di scorrere un array e recuperarne gli elementi sotto forma di coppie chiave => valore. Ecco la struttura tipica:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#66d9ef>foreach</span> ($array_da_attraversare <span style=color:#66d9ef>as</span> $chiave_elemento <span style=color:#f92672>=&gt;</span> $valore_elemento)
{
  <span style=color:#75715e>// istruzioni da iterare
</span><span style=color:#75715e></span>}
</code></pre></div><p>Il funzionamento è lo stesso della struttura vista in precedenza. L&rsquo;unica differenza è che adesso anche le chiavi di ciascun elemento vengono lette e copiate nella variabile $chiave_elemento. Vediamo un semplice esempio:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
$film <span style=color:#f92672>=</span> <span style=color:#66d9ef>array</span>(<span style=color:#e6db74>&#39;titolo&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Via col Vento&#39;</span>, <span style=color:#e6db74>&#39;anno&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#ae81ff>1939</span>,<span style=color:#e6db74>&#39;regista&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Victor Fleming&#39;</span>);

<span style=color:#66d9ef>foreach</span> ($film <span style=color:#66d9ef>as</span> $info <span style=color:#f92672>=&gt;</span> $valore)
{
   <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>$info</span><span style=color:#e6db74>: </span><span style=color:#e6db74>$valore</span><span style=color:#e6db74> &lt;br&gt;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>;
}
<span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>Anche con questa sintassi è possibile usare il carattere & per far si che la variabile $valore sia legata direttamente al corrispondente valore dell&rsquo;array da attraversare in modo che questo possa essere modificato.</p><p>Concludiamo risolvendo il problema posto all&rsquo;inizio della Lezione 8: mostrare un elenco di recensioni di films. In quella lezione avevamo detto che la struttura migliore per contenere questi dati sarebbe stata un array multilivello, ovvero un array i cui elementi fossero a loro volta degli array contenenti i dati di ciascun film. Vediamo come usare un ciclo foreach per questo tipo di struttura.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
$films <span style=color:#f92672>=</span> <span style=color:#66d9ef>array</span>(<span style=color:#66d9ef>array</span>(<span style=color:#e6db74>&#39;titolo&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Via col Vento&#39;</span>,
                    <span style=color:#e6db74>&#39;anno&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#ae81ff>1939</span>,
                    <span style=color:#e6db74>&#39;regista&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Victor Fleming&#39;</span>),
              <span style=color:#66d9ef>array</span>(<span style=color:#e6db74>&#39;titolo&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Star Wars&#39;</span>,
                    <span style=color:#e6db74>&#39;anno&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#ae81ff>1977</span>,
                    <span style=color:#e6db74>&#39;regista&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;George Lucas&#39;</span>));

<span style=color:#66d9ef>foreach</span> ($films <span style=color:#66d9ef>as</span> $film)
{
   <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#39;Titolo film: &#39;</span> , $film[<span style=color:#e6db74>&#39;titolo&#39;</span>];
   <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#39;&lt;br&gt;&#39;</span>;
   <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#39;Anno: &#39;</span> , $film[<span style=color:#e6db74>&#39;anno&#39;</span>];
   <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#39;&lt;br&gt;&#39;</span>;
   <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#39;Regista: &#39;</span> , $film[<span style=color:#e6db74>&#39;regista&#39;</span>];
   <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#39;&lt;br&gt;&lt;br&gt;&#39;</span>;
}
<span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>Notiamo come la variabile $film sia ancora un array e pertanto i dati in esso contenuti sono accessibili attraverso l&rsquo;uso delle diverse chiavi (titolo, anno, regista).</p><p>Tale approccio è comunemente usato anche nell&rsquo;estrazione di dati da un database. Questi infatti spesso sono disponibili ad uno script PHP proprio sotto forma di array multilivello.</p></div></article></main><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=/corsi/corso-php-base/la-conversione-automatica-dei-tipi-il-cast/ rel=prev><span class=pager__subtitle>«&#8201;Precedente</span><p class=pager__title>La conversione automatica dei tipi: il cast</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=/corsi/corso-php-base/cicli-e-iterazioni-while-e-do-while/ rel=next><span class=pager__subtitle>Prossimo&#8201;»</span><p class=pager__title>Cicli e iterazioni: while e do-while</p></a></div></nav></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2021 Giovanni Tomasicchio.
<span class=footer__copyright-credits>Generato con <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> e il tema <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a>.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>