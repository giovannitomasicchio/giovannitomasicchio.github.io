<!doctype html><html class=no-js lang=it><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>La conversione automatica dei tipi: il cast - Giovanni Tomasicchio</title><script>(function(a,b){a[b]=a[b].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="Conversione dei tipi in PHP, il cast."><meta property="og:title" content="La conversione automatica dei tipi: il cast"><meta property="og:description" content="Conversione dei tipi in PHP, il cast."><meta property="og:type" content="article"><meta property="og:url" content="https://giovannitomasicchio.github.io/corsi/corso-php-base/la-conversione-automatica-dei-tipi-il-cast/"><meta property="article:section" content="corsi"><meta property="article:published_time" content="2005-07-13T22:33:53+00:00"><meta property="article:modified_time" content="2005-07-13T22:33:53+00:00"><meta itemprop=name content="La conversione automatica dei tipi: il cast"><meta itemprop=description content="Conversione dei tipi in PHP, il cast."><meta itemprop=datePublished content="2005-07-13T22:33:53+00:00"><meta itemprop=dateModified content="2005-07-13T22:33:53+00:00"><meta itemprop=wordCount content="603"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="La conversione automatica dei tipi: il cast"><meta name=twitter:description content="Conversione dei tipi in PHP, il cast."><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,regular,italic,600,600italic,700,700italic,800,800italic|Kaushan+Script:regular"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/custom.css><link rel="shortcut icon" href=/favicon.ico><script async src="https://www.googletagmanager.com/gtag/js?id=G-525H86QENV"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-525H86QENV',{anonymize_ip:!1})}</script></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Giovanni Tomasicchio" rel=home><div class="logo__item logo__text"><div class=logo__title>Giovanni Tomasicchio</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/articoli/><span class=menu__text>Articoli PHP</span></a></li><li class=menu__item><a class=menu__link href=/corsi/><span class=menu__text>Corsi</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>La conversione automatica dei tipi: il cast</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2005-07-13T22:33:53Z>13 July 2005</time></div></div></header><div class="content post__content clearfix"><p>Quello che stiamo per affrontare è probabilmente uno degli argomenti più &ldquo;oscuri&rdquo; nella programmazione PHP spesso ignorato anche dai programmatori con una certa esperienza. Perché allora dovremmo parlarne? Principalmente per 2 motivi. Se infatti conoscete già altri linguaggi (ad esempio C, C++, Java, VisualBasic, Pascal) alcuni comportamenti di PHP vi sembreranno alquanto anomali ed inspiegabili rispetto a ciò che è stato il vostro modo di programmare fino a questo momento. Ed anche se siete alle prime armi è importante conoscere questo argomento in modo da non incorrere in errori che sembrerebbero inspiegabili.</p><p>Ma forse è meglio vedere subito un esempio semplice ma efficace:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
<span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#39;5&#39;</span> <span style=color:#f92672>*</span> <span style=color:#e6db74>&#39;3&#39;</span>;
<span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>Abbiamo chiesto al PHP di mostrarci il risultato di una moltiplicazione tra due stringhe. Questa operazione non ha alcun senso eppure se lanciamo lo script otteniamo come risultato &ldquo;15&rdquo; ovvero il prodotto tra dei numeri contenuti all&rsquo;interno della stringa. Per capire cosa sia successo vediamo i singoli passi che hanno portato a questo risultato:</p><ul><li>il PHP deve risolvere l&rsquo;espressione &lsquo;5&rsquo; * &lsquo;3&rsquo;;</li><li>poiché si tratta di un operatore algebrico (la moltiplicazione *) il PHP si aspetta di trovare due numeri;</li><li>entrambi i fattori sono però delle stringhe ( &lsquo;5&rsquo; e &lsquo;3&rsquo; ) allora il PHP prima di procedere deve convertirle in numeri. Questa operazione di conversione di tipo (da tipo stringa a tipo numero) viene detta cast. La stringa &lsquo;5&rsquo; diventa il numero 5 e la stringa &lsquo;3&rsquo; diventa il numero 3;</li><li>il PHP adesso può effettuare il prodotto tra i numeri 5 e 3;</li><li>viene mostrato il numero 15.</li></ul><p>Il PHP quindi effettua in maniera trasparente, ovvero senza una esplicita indicazione, delle conversioni di tipo ogni qualvolta deve effettuare una operazione su un tipo di dati diverso da quello atteso. Ovviamente questa conversione può portare a risultati privi di significato: &ldquo;casa&rdquo; * &ldquo;3&rdquo; sarà uguale a 0 poiché la stringa &ldquo;casa&rdquo; non sottintende un valore numerico e perciò sarà convertita nel numero 0.</p><p>Vediamo ora un esempio di conversione da numero a stringa:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
<span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#39;un numero a caso: &#39;</span> <span style=color:#f92672>.</span> <span style=color:#ae81ff>43</span>;
<span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>E' evidente che in questo caso il numero 43 verrà convertito in stringa prima di essere accodato attraverso l&rsquo;operatore &ldquo;.&rdquo; che lavora solo su stringhe.</p><p>Il caso più interessante di conversione di tipo però è quello che da come risultato il tipo booleano. Come accennato nella precedente lezione a proposito degli operatori logici, spesso capita che il PHP debba eseguire un&rsquo;operazione e si aspetta che i dati su cui lavorare siano di tipo booleano (come nella condizione del costrutto if) ma invece gli vengono forniti dati di altro tipo (interi, stringhe, array). PHP procederà quindi ad una conversione che seguirà queste regole.</p><ul><li>Tutti i numeri sono convertiti in true tranne lo 0</li><li>Tutte le stringhe sono convertite in true tranne le stringhe vuote ("") e quelle che valgono &ldquo;0&rdquo;</li><li>Tutti gli array sono convertiti in true tranne quelli vuoti (senza elementi)</li></ul><p>Come sarà chiarito dal seguente esempio, l&rsquo;uso di diversi tipi di dati e la loro implicita conversione in booleano permette di scrivere codice molto compatto ed efficace.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
$array <span style=color:#f92672>=</span> <span style=color:#66d9ef>array</span>();

<span style=color:#75715e>// conversione implicita da array a booleano
</span><span style=color:#75715e></span><span style=color:#66d9ef>if</span>($array)
{
  <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#39;l\&#39;array $array ha almeno un elemento &lt;br&gt;&#39;</span>;
}
<span style=color:#66d9ef>else</span>
{
  <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#39;l\&#39;array $array è vuoto &lt;br&gt;&#39;</span>;
}

$stringa <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;ciao&#39;</span>;

<span style=color:#75715e>// conversione implicita da stringa a booleano
</span><span style=color:#75715e></span><span style=color:#66d9ef>if</span>($stringa)
{
  <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#39;la stringa $stringa vale &#39;</span> , $stringa;
}
<span style=color:#66d9ef>else</span>
{
  <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#39;la stringa $stringa è vuota&#39;</span>;
}

$numero <span style=color:#f92672>=</span> <span style=color:#ae81ff>123</span>;

<span style=color:#75715e>// conversione implicita da numero a booleano
</span><span style=color:#75715e></span><span style=color:#66d9ef>if</span>($numero)
{
   <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#39;la variabile $numero è diversa da 0&#39;</span>;
}
<span style=color:#66d9ef>else</span>
{
   <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#39;la variabile $numero è uguale a 0&#39;</span>;
}
<span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div></div></article></main><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=/corsi/corso-php-base/gli-operatori/ rel=prev><span class=pager__subtitle>«&#8201;Precedente</span><p class=pager__title>Gli operatori</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=/corsi/corso-php-base/cicli-e-iterazioni-for-e-foreach/ rel=next><span class=pager__subtitle>Prossimo&#8201;»</span><p class=pager__title>Cicli e iterazioni: for e foreach</p></a></div></nav></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2021 Giovanni Tomasicchio.
<span class=footer__copyright-credits>Generato con <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> e il tema <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a>.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>