<!doctype html><html class=no-js lang=it><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>REST, applicazione al Web ed ai servizi RESTful - Giovanni Tomasicchio</title><script>(function(a,b){a[b]=a[b].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="REST, applicazione al Web ed ai servizi RESTful"><meta property="og:description" content="Nel precedente post vi ho raccontato delle vicende che hanno portato alla definizione del modello REST. Non è il caso di entrare nel merito della descrizione, piuttosto formale, che ne fa l’autore nella sua tesi di dottorato. Vediamo invece quali sono i concetti chiave di questa architettura e come questi siano riscontrabili nel Web e più di recente abbiano ispirato i servizi RESTful*.
Risorse e identificativi Nel modello REST si parla di risorse e dei relativi identificativi, che corrispondono nel Web ai documenti (html, jpg, css, ecc."><meta property="og:type" content="article"><meta property="og:url" content="https://giovannitomasicchio.github.io/rest-applicazione-al-web-ed-ai-servizi-restful/"><meta property="article:section" content="post"><meta property="article:published_time" content="2017-09-23T14:44:32+00:00"><meta property="article:modified_time" content="2017-09-23T14:44:32+00:00"><meta itemprop=name content="REST, applicazione al Web ed ai servizi RESTful"><meta itemprop=description content="Nel precedente post vi ho raccontato delle vicende che hanno portato alla definizione del modello REST. Non è il caso di entrare nel merito della descrizione, piuttosto formale, che ne fa l’autore nella sua tesi di dottorato. Vediamo invece quali sono i concetti chiave di questa architettura e come questi siano riscontrabili nel Web e più di recente abbiano ispirato i servizi RESTful*.
Risorse e identificativi Nel modello REST si parla di risorse e dei relativi identificativi, che corrispondono nel Web ai documenti (html, jpg, css, ecc."><meta itemprop=datePublished content="2017-09-23T14:44:32+00:00"><meta itemprop=dateModified content="2017-09-23T14:44:32+00:00"><meta itemprop=wordCount content="1602"><meta itemprop=keywords content="HTTP,REST,RESTful,SOAP,"><meta name=twitter:card content="summary"><meta name=twitter:title content="REST, applicazione al Web ed ai servizi RESTful"><meta name=twitter:description content="Nel precedente post vi ho raccontato delle vicende che hanno portato alla definizione del modello REST. Non è il caso di entrare nel merito della descrizione, piuttosto formale, che ne fa l’autore nella sua tesi di dottorato. Vediamo invece quali sono i concetti chiave di questa architettura e come questi siano riscontrabili nel Web e più di recente abbiano ispirato i servizi RESTful*.
Risorse e identificativi Nel modello REST si parla di risorse e dei relativi identificativi, che corrispondono nel Web ai documenti (html, jpg, css, ecc."><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,regular,italic,600,600italic,700,700italic,800,800italic|Kaushan+Script:regular"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/custom.css><link rel="shortcut icon" href=/favicon.ico><script async src="https://www.googletagmanager.com/gtag/js?id=G-525H86QENV"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-525H86QENV',{anonymize_ip:!1})}</script></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Giovanni Tomasicchio" rel=home><div class="logo__item logo__text"><div class=logo__title>Giovanni Tomasicchio</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/articoli/><span class=menu__text>Articoli PHP</span></a></li><li class=menu__item><a class=menu__link href=/corsi/><span class=menu__text>Corsi</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>REST, applicazione al Web ed ai servizi RESTful</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2017-09-23T14:44:32Z>23 September 2017</time></div></div></header><figure class=post__thumbnail><img src=/wp-content/uploads/2017/09/world-wide-web.jpg alt="REST, applicazione al Web ed ai servizi RESTful"></figure><div class="content post__content clearfix"><p>Nel <a href=/architettura-rest-le-origini/>precedente post</a> vi ho raccontato delle vicende che hanno portato alla definizione del modello REST. Non è il caso di entrare nel merito della descrizione, piuttosto formale, che ne fa l’autore nella sua <a href=https://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm>tesi di dottorato</a>. Vediamo invece quali sono i concetti chiave di questa architettura e come questi siano riscontrabili nel Web e più di recente abbiano ispirato i servizi RESTful*.</p><h2 id=risorse-e-identificativi>Risorse e identificativi</h2><p>Nel modello REST si parla di risorse e dei relativi identificativi, che corrispondono nel Web ai documenti (html, jpg, css, ecc.) e alle funzionalità identificate dagli URL. Anche i servizi RESTful utilizzano gli <strong>URL per identificare l’oggetto delle possibili interazioni tra client e server</strong>. Ad esempio i servizi RESTful di una videoteca potrebbero avere i seguenti URL:</p><ol><li>/film<br>per interagire con l’intero archivio dei film</li><li>/film/terminator<br>per gestire il particolare film Terminator</li><li>/film/terminator/attori<br>per accedere all’elenco degli attori di Terminator</li><li>/film/terminator/attori/schwarzenegger<br>per interagire con l’interpretazione di Arnold Schwarzenegger in Terminator</li></ol><p>Gli URL degli esempi 1 e 3 si dicono di tipo <em>collection</em> poiché fanno riferimento ad un insieme omogeneo di elementi (film e attori di un film), mentre gli URL 2 e 4 referenziano specifici elementi.</p><p>Salta subito all’occhio una differenza sostanziale con i servizi SOAP che tramite un unico URL possono esporre funzionalità relative a differenti soggetti (film, attori, ecc.). Questo avviene perché in SOAP l’oggetto dell’interazione tra client e server è codificato nel messaggio XML e non nell’URL.</p><h2 id=rappresentazione-delle-risorse>Rappresentazione delle risorse</h2><p>Abbiamo detto che nel modello REST l’interazione tra client e server ha come oggetto una risorsa. Questa risorsa però si manifesta non direttamente ma tramite delle sue rappresentazioni. Una rappresentazione di una risorsa è costituita da:</p><ul><li>i dati associati alla risorsa, descritti mediante una specifica codifica;</li><li>i metadati necessari a descrivere i suddetti dati, sotto forma di coppie nome – valore.</li></ul><p>Per una particolare risorsa possono essere prodotte differenti rappresentazioni, ad esempio impiegando diverse sistemi di codifica della stessa.</p><p>Nel Web ad esempio la rappresentazione di una pagina HTML è costituita dai byte dell’HTML a cui si aggiungono le intestazioni HTTP che permettono al browser di interpretarli correttamente (Content-Type, charset, ecc.). Inoltre la rappresentazione di una risorsa può essere il frutto di una negoziazione tra browser e server. Questo aspetto emerge se analizziamo le intestazioni HTTP scambiate tra browser e server nel caso di accesso ad una pagina web:</p><ul><li>nella richiesta del browser è presente un header HTTP con l’indicazione di quali sono le tipologie di rappresentazione della risorsa che il browser è in grado di gestire:</li></ul><ul><li>nella risposta invece è presente la tipologia di rappresentazione scelta dal server per l’invio al browser della risorsa richiesta:</li></ul><p>Per i servizi RESTful questo concetto si traduce nella possibilità di realizzare una negoziazione tra client e server sul formato di codifica da utilizzare nella trasmissione dei dati, come JSON o XML, del tutto simile a quella che avviene tra browser e server web. Anche questa caratteristica differenzia i servizi RESTful da quelli SOAP che invece adottano solo messaggi XML.</p><h2 id=trasporto-delle-rappresentazioni>Trasporto delle rappresentazioni</h2><p>Il modello REST prevede una interazione di tipo client-server tra i nodi della rete. In queste interazioni ha luogo il trasporto, ovvero la trasmissione delle rappresentazioni delle risorse tra client e server. Per descrivere queste comunicazioni, client e server utilizzano dei “control data”, con lo scopo di dichiarare 1) l’azione richiesta dal client e 2) il significato della risposta del server.</p><p>Nel Web questo si realizza mediante il protocollo di trasporto HTTP, che utilizza:</p><ol><li>dei “verbi” per specificare il tipo di richiesta che il client rivolge al server web;</li><li>degli “status code” per indicare al browser l’esito della richiesta effettuata.</li></ol><p>I verbi più utilizzati da un browser sono GET, per richiedere una “pagina” dato il suo URL, e POST per inviare al server i dati inseriti da un utente in un form HTML. Lo status code più noto del Web è certamente il 404 “pagina non trovata”.</p><p>I verbi HTTP ricoprono un ruolo del tutto simile nei servizi RESTful. Mediante questi verbi il client indica al server quale tipo di operazione intende effettuare su una particolare risorsa. Per questa ragione nel contesto dei servizi RESTful vengono impiegati, oltre a GET e POST, ulteriori verbi HTTP. Di seguito il significato di quelli maggiormente utilizzati, raggruppati in base al risultato atteso in caso di esecuzione multipla (idempotenza).</p><p><strong>Operazioni idempotenti</strong> – anche se eseguite più volte su uno specifico URL, il risultato non deve cambiare rispetto a quello ottenibile con una singola esecuzione.</p><ul><li><strong>GET</strong>, per recuperare una rappresentazione della risorsa.<br>In caso di URL di tipo <em>collection</em> la risposta del server dovrebbe contenere, tra l’altro, anche gli URL delle singole entità appartenenti alla <em>collection</em>.<br>Questa operazione non deve in alcun modo modificare lo stato della risorsa richiesta.</li><li><strong>PUT</strong>, crea o aggiorna una risorsa identificata dall’URL specificato. Se la risorsa esiste già allora il server la aggiorna, altrimenti la crea, associandola all’URL specificato.<br>Generalmente l’URL specificato in una richiesta di tipo PUT non è di tipo <em>collection</em> (vedi i precedenti esempi 1 e 3) ma identifica una specifica entità, a meno che non si voglia creare o aggiornare una intera <em>collection</em>.<br>Poiché l’identificativo della risorsa è specificato dal client, se questa non esiste il server è tenuto a crearla utilizzando proprio questo identificativo. Non è detto però che il server possa accettare che sia il client a scegliere l’identificativo delle nuove risorse, ad esempio perché questo è un numero progressivo gestito dal server. In questi casi il server, ad una richiesta PUT per una nuova risorsa, restituisce un errore.</li><li><strong>DELETE</strong>, cancella una risorsa identificata dall’URL specificato.<br>Come per PUT, generalmente l’URL specificato in una richiesta di tipo DELETE non è di tipo <em>collection</em>.</li></ul><p><strong>Operazioni non idempotenti</strong> – il risultato può cambiare ad ogni esecuzione dell’operazione.</p><ul><li><strong>POST</strong>, per la creazione di una nuova risorsa affidata ad un URL che rappresenta l’entità “padre” della nuova risorsa.<br>Generalmente l’URL specificato in una richiesta di tipo POST è di tipo <em>collection</em>, poiché il client vuole aggiungere una nuova risorsa nella <em>collection</em> indicata.</li></ul><p>Nel caso si stia realizzando un servizio RESTful con una semantica non immediatamente riconducibile a quella di una delle suddette operazioni, bisogna comunque scegliere il verbo che si avvicina di più allo scopo del servizio tra quelli definiti dagli standard <a href=https://tools.ietf.org/html/rfc7231#section-4>RFC 7231</a> (GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE) e <a href=https://tools.ietf.org/html/rfc5789#section-2>RFC 5789</a> (PATCH), facendo massima attenzione a rispettare la caratteristica di idempotenza del verbo scelto.</p><p>Come anticipato, l’esito delle richieste RESTful viene indicato dal server mediante lo <a href=https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html>status code</a> dell’HTTP. Di seguito alcuni possibili esiti delle principali operazioni:</p><ul><li>GET: 200 (Ok) se il server è in grado di restituire la risorsa associata all’URL richiesto, 404 (Not Found) se l’URL non esiste;</li><li>PUT: 200 (Ok) o 204 (No Content) se la risorsa viene creata o aggiornata come richiesto, 405 (Method Not Allowed) se il server non accetta di eseguire l’operazione richiesta sull’URL specificato (ad esempio in caso di richiesta di creazione di nuove risorse);</li><li>POST: 201 (Created) se il server è in grado di creare la nuova risorsa;</li><li>DELETE: 200 (Ok) o 204 (No Content) se il server è in grado di rimuovere la risorsa associata all’URL richiesto, 404 (Not Found) se l’URL non esiste;</li></ul><p>In estrema sintesi potremmo dire che i servizi RESTful affidano tutta la gestione del trasposto delle rappresentazioni al protocollo HTTP: la semantica della richiesta del client è codificata nei verbi HTTP mentre il significato delle risposte è comunicato al client mediante gli status code. Questa costituisce una ulteriore differenza con i servizi SOAP che invece incorporano nel messaggio XML la descrizione della <em>request</em> e della <em>response</em>.</p><h2 id=hateoas>HATEOAS</h2><p>Il modello REST è definito dall’autore come un “<a href=https://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm>architectural style for distributed hypermedia systems</a>“. Non sorprende quindi che in questo modello abbia un ruolo centrale il concetto di ipertesto: “Hypertext As The Engine Of Application State” da cui il discutibile acronimo HATEOAS. Le risorse del modello REST sono infatti collegate mediante link che permettono di navigare il “distributed hypermedia systems”.</p><p>Nel Web questi link sono presenti sia nei documenti HTML (i tag ), sia nei messaggi del protocollo HTTP, si pensi alla risposta <a href=https://en.wikipedia.org/wiki/HTTP_301>HTTP 301 “Moved Permanently”</a>. Allo stesso modo anche i servizi RESTful sono tenuti ad incorporare nei messaggi e nel protocollo HTTP l’informazione degli URL associati alla risorsa corrente. Ad esempio quando il client effettua una GET per un URL, il messaggio di risposta deve contenere gli URL delle risorse collegate all’URL richiesto. Oppure quando il client effettua una POST per creare una nuova risorsa, il server deve rispondere indicando l’URL della risorsa appena creata, nonché gli URL da utilizzare per manipolarla.</p><p>In questo modo, analizzando le risposte del server, è possibile “navigare” il servizio RESTful e scoprire tutte le funzionalità disponibili. Inoltre è possibile per il client rendere dinamico il puntamento ai diversi URL del server poiché è questo a fornirli di volta in volta.</p><p>Purtroppo non esiste una sintassi standard per incorporare questi link nei messaggi RESTful. La soluzione più adottata è quella definita nello standard <a href=https://tools.ietf.org/html/rfc4287>ATOM</a>.</p><h2 id=conclusioni>Conclusioni</h2><p>In questo post abbiamo descritto il modello REST utilizzando la sua implementazione più nota, ovvero il Web, e la più recente applicazione costituita dai servizi RESTful. Ho volutamente trascurato altri importanti aspetti del modello che ci serviranno, in un prossimo post, per rispondere alle seguenti domande:</p><ul><li>i servizi RESTful sono migliori di quelli SOAP?</li><li>perché è stata recuperata una tecnologia non certo recente per disegnare un nuovo modello di servizi web?</li><li>il modello REST deve essere preso in considerazione nella progettazione di applicazioni web?</li><li>perché sono ossessionato da questo argomento?</li></ul><p>_<strong>_</strong></p><ul><li>Anche se i servizi RESTful non obbligano ad utilizzare un particolare protocollo, in questo post faccio riferimento all’implementazione più diffusa, ovvero quella che sfrutta l’HTTP.</li></ul></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/http/ rel=tag>HTTP</a></li><li class=tags__item><a class="tags__link btn" href=/tags/rest/ rel=tag>REST</a></li><li class=tags__item><a class="tags__link btn" href=/tags/restful/ rel=tag>RESTful</a></li><li class=tags__item><a class="tags__link btn" href=/tags/soap/ rel=tag>SOAP</a></li></ul></div></footer></article></main><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=/architettura-rest-le-origini/ rel=prev><span class=pager__subtitle>«&#8201;Precedente</span><p class=pager__title>Architettura REST, le origini</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=/rest-quanto-costa-infedelta/ rel=next><span class=pager__subtitle>Prossimo&#8201;»</span><p class=pager__title>REST, quanto costa l’infedeltà?</p></a></div></nav></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2021 Giovanni Tomasicchio.
<span class=footer__copyright-credits>Generato con <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> e il tema <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a>.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>